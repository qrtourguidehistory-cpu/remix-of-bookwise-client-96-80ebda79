import{v as M,u as ae,j as e,r as p,p as Ne,e as Ce,s as Me,g as I,P as O,d as F,q as Pe,c as Q,b as se,X as ne,B as _e,a as Re,Q as U,O as De}from"./index-CnnmV7T0.js";import{B as Ee}from"./BottomNavigation-B6InQMLb.js";import{I as Ae}from"./input-BEB3ApMY.js";import{S as ze}from"./search-Dsq1NjL-.js";import{M as oe}from"./map-pin-BgNspeh3.js";import{c as ie}from"./index-BdQq_4o_.js";import{u as Te}from"./index-4syfhskI.js";import{u as Be}from"./index-Da1lquuU.js";import{H as le,u as Le}from"./useFavorites-CqDVLaXT.js";import{S as Ie}from"./star-DASKaL2D.js";import{T as Fe}from"./tag-C5cDi3Ds.js";import{U as Ve}from"./users-CN4D-GIu.js";import{B as J}from"./BusinessCard-CoUqGoNR.js";import{u as Oe}from"./useEstablishments-CQyuaLwb.js";import{S as He}from"./sun-B0ta9g00.js";import{U as qe}from"./user-uv3ogaFs.js";import{E as Ke}from"./eye-C7PPDy8z.js";import{S as $e}from"./scissors-BSGTCoGD.js";import"./calendar-CLTEL6HX.js";import"./ImageCarousel-DO9C33HW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=M("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=M("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=M("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=M("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=M("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=M("HandMetal",[["path",{d:"M18 12.5V10a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1.4",key:"wc6myp"}],["path",{d:"M14 11V9a2 2 0 1 0-4 0v2",key:"94qvcw"}],["path",{d:"M10 10.5V5a2 2 0 1 0-4 0v9",key:"m1ah89"}],["path",{d:"m7 15-1.76-1.76a2 2 0 0 0-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 0 0 8-8V7a2 2 0 1 0-4 0v5",key:"t1skq1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=M("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=M("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=M("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=M("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=M("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=M("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);function rt({value:r,onChange:a,placeholder:s="Buscar salones, servicios...",onMapClick:o,onFilterClick:n,showFilter:l=!0}){const i=ae(),m=()=>{o?o():i("/map")};return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(Ae,{type:"text",value:r,onChange:g=>a(g.target.value),placeholder:s,className:"pl-12 pr-12 h-12 rounded-xl bg-secondary border-0 text-foreground placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-primary"}),e.jsx("button",{onClick:m,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]}),l&&n&&e.jsx("button",{onClick:n,className:"flex-shrink-0 p-3 rounded-xl bg-secondary text-foreground hover:bg-secondary/80 transition-colors",children:e.jsx(Je,{className:"w-5 h-5"})})]})}var ce=["PageUp","PageDown"],de=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ue={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},V="Slider",[Y,at,st]=Me(V),[me]=Ce(V,[st]),[nt,K]=me(V),pe=p.forwardRef((r,a)=>{const{name:s,min:o=0,max:n=100,step:l=1,orientation:i="horizontal",disabled:m=!1,minStepsBetweenThumbs:g=0,defaultValue:h=[o],value:y,onValueChange:u=()=>{},onValueCommit:c=()=>{},inverted:b=!1,form:w,...k}=r,j=p.useRef(new Set),x=p.useRef(0),N=i==="horizontal"?ot:it,[S=[],A]=Ne({prop:y,defaultProp:h,onChange:t=>{var f;(f=[...j.current][x.current])==null||f.focus(),u(t)}}),B=p.useRef(S);function z(t){const d=mt(S,t);T(t,d)}function H(t){T(t,x.current)}function $(){const t=B.current[x.current];S[x.current]!==t&&c(S)}function T(t,d,{commit:f}={commit:!1}){const E=gt(l),v=xt(Math.round((t-o)/l)*l+o,E),C=ie(v,[o,n]);A((R=[])=>{const _=dt(R,C,d);if(ft(_,g*l)){x.current=_.indexOf(C);const D=String(_)!==String(R);return D&&f&&c(_),D?_:R}else return R})}return e.jsx(nt,{scope:r.__scopeSlider,name:s,disabled:m,min:o,max:n,valueIndexToChangeRef:x,thumbs:j.current,values:S,orientation:i,form:w,children:e.jsx(Y.Provider,{scope:r.__scopeSlider,children:e.jsx(Y.Slot,{scope:r.__scopeSlider,children:e.jsx(N,{"aria-disabled":m,"data-disabled":m?"":void 0,...k,ref:a,onPointerDown:I(k.onPointerDown,()=>{m||(B.current=S)}),min:o,max:n,inverted:b,onSlideStart:m?void 0:z,onSlideMove:m?void 0:H,onSlideEnd:m?void 0:$,onHomeKeyDown:()=>!m&&T(o,0,{commit:!0}),onEndKeyDown:()=>!m&&T(n,S.length-1,{commit:!0}),onStepKeyDown:({event:t,direction:d})=>{if(!m){const v=ce.includes(t.key)||t.shiftKey&&de.includes(t.key)?10:1,C=x.current,R=S[C],_=l*v*d;T(R+_,C,{commit:!0})}}})})})})});pe.displayName=V;var[he,fe]=me(V,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ot=p.forwardRef((r,a)=>{const{min:s,max:o,dir:n,inverted:l,onSlideStart:i,onSlideMove:m,onSlideEnd:g,onStepKeyDown:h,...y}=r,[u,c]=p.useState(null),b=F(a,N=>c(N)),w=p.useRef(void 0),k=Te(n),j=k==="ltr",x=j&&!l||!j&&l;function P(N){const S=w.current||u.getBoundingClientRect(),A=[0,S.width],z=Z(A,x?[s,o]:[o,s]);return w.current=S,z(N-S.left)}return e.jsx(he,{scope:r.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:e.jsx(ge,{dir:k,"data-orientation":"horizontal",...y,ref:b,style:{...y.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const S=P(N.clientX);i==null||i(S)},onSlideMove:N=>{const S=P(N.clientX);m==null||m(S)},onSlideEnd:()=>{w.current=void 0,g==null||g()},onStepKeyDown:N=>{const A=ue[x?"from-left":"from-right"].includes(N.key);h==null||h({event:N,direction:A?-1:1})}})})}),it=p.forwardRef((r,a)=>{const{min:s,max:o,inverted:n,onSlideStart:l,onSlideMove:i,onSlideEnd:m,onStepKeyDown:g,...h}=r,y=p.useRef(null),u=F(a,y),c=p.useRef(void 0),b=!n;function w(k){const j=c.current||y.current.getBoundingClientRect(),x=[0,j.height],N=Z(x,b?[o,s]:[s,o]);return c.current=j,N(k-j.top)}return e.jsx(he,{scope:r.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:e.jsx(ge,{"data-orientation":"vertical",...h,ref:u,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:k=>{const j=w(k.clientY);l==null||l(j)},onSlideMove:k=>{const j=w(k.clientY);i==null||i(j)},onSlideEnd:()=>{c.current=void 0,m==null||m()},onStepKeyDown:k=>{const x=ue[b?"from-bottom":"from-top"].includes(k.key);g==null||g({event:k,direction:x?-1:1})}})})}),ge=p.forwardRef((r,a)=>{const{__scopeSlider:s,onSlideStart:o,onSlideMove:n,onSlideEnd:l,onHomeKeyDown:i,onEndKeyDown:m,onStepKeyDown:g,...h}=r,y=K(V,s);return e.jsx(O.span,{...h,ref:a,onKeyDown:I(r.onKeyDown,u=>{u.key==="Home"?(i(u),u.preventDefault()):u.key==="End"?(m(u),u.preventDefault()):ce.concat(de).includes(u.key)&&(g(u),u.preventDefault())}),onPointerDown:I(r.onPointerDown,u=>{const c=u.target;c.setPointerCapture(u.pointerId),u.preventDefault(),y.thumbs.has(c)?c.focus():o(u)}),onPointerMove:I(r.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&n(u)}),onPointerUp:I(r.onPointerUp,u=>{const c=u.target;c.hasPointerCapture(u.pointerId)&&(c.releasePointerCapture(u.pointerId),l(u))})})}),xe="SliderTrack",be=p.forwardRef((r,a)=>{const{__scopeSlider:s,...o}=r,n=K(xe,s);return e.jsx(O.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...o,ref:a})});be.displayName=xe;var W="SliderRange",ye=p.forwardRef((r,a)=>{const{__scopeSlider:s,...o}=r,n=K(W,s),l=fe(W,s),i=p.useRef(null),m=F(a,i),g=n.values.length,h=n.values.map(c=>je(c,n.min,n.max)),y=g>1?Math.min(...h):0,u=100-Math.max(...h);return e.jsx(O.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...o,ref:m,style:{...r.style,[l.startEdge]:y+"%",[l.endEdge]:u+"%"}})});ye.displayName=W;var X="SliderThumb",ve=p.forwardRef((r,a)=>{const s=at(r.__scopeSlider),[o,n]=p.useState(null),l=F(a,m=>n(m)),i=p.useMemo(()=>o?s().findIndex(m=>m.ref.current===o):-1,[s,o]);return e.jsx(lt,{...r,ref:l,index:i})}),lt=p.forwardRef((r,a)=>{const{__scopeSlider:s,index:o,name:n,...l}=r,i=K(X,s),m=fe(X,s),[g,h]=p.useState(null),y=F(a,P=>h(P)),u=g?i.form||!!g.closest("form"):!0,c=Pe(g),b=i.values[o],w=b===void 0?0:je(b,i.min,i.max),k=ut(o,i.values.length),j=c==null?void 0:c[m.size],x=j?pt(j,w,m.direction):0;return p.useEffect(()=>{if(g)return i.thumbs.add(g),()=>{i.thumbs.delete(g)}},[g,i.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[m.startEdge]:`calc(${w}% + ${x}px)`},children:[e.jsx(Y.ItemSlot,{scope:r.__scopeSlider,children:e.jsx(O.span,{role:"slider","aria-label":r["aria-label"]||k,"aria-valuemin":i.min,"aria-valuenow":b,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...l,ref:y,style:b===void 0?{display:"none"}:r.style,onFocus:I(r.onFocus,()=>{i.valueIndexToChangeRef.current=o})})}),u&&e.jsx(we,{name:n??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:b},o)]})});ve.displayName=X;var ct="RadioBubbleInput",we=p.forwardRef(({__scopeSlider:r,value:a,...s},o)=>{const n=p.useRef(null),l=F(n,o),i=Be(a);return p.useEffect(()=>{const m=n.current;if(!m)return;const g=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(g,"value").set;if(i!==a&&y){const u=new Event("input",{bubbles:!0});y.call(m,a),m.dispatchEvent(u)}},[i,a]),e.jsx(O.input,{style:{display:"none"},...s,ref:l,defaultValue:a})});we.displayName=ct;function dt(r=[],a,s){const o=[...r];return o[s]=a,o.sort((n,l)=>n-l)}function je(r,a,s){const l=100/(s-a)*(r-a);return ie(l,[0,100])}function ut(r,a){return a>2?`Value ${r+1} of ${a}`:a===2?["Minimum","Maximum"][r]:void 0}function mt(r,a){if(r.length===1)return 0;const s=r.map(n=>Math.abs(n-a)),o=Math.min(...s);return s.indexOf(o)}function pt(r,a,s){const o=r/2,l=Z([0,50],[0,o]);return(o-l(a)*s)*s}function ht(r){return r.slice(0,-1).map((a,s)=>r[s+1]-a)}function ft(r,a){if(a>0){const s=ht(r);return Math.min(...s)>=a}return!0}function Z(r,a){return s=>{if(r[0]===r[1]||a[0]===a[1])return a[0];const o=(a[1]-a[0])/(r[1]-r[0]);return a[0]+o*(s-r[0])}}function gt(r){return(String(r).split(".")[1]||"").length}function xt(r,a){const s=Math.pow(10,a);return Math.round(r*s)/s}var Se=pe,bt=be,yt=ye,vt=ve;const ke=p.forwardRef(({className:r,...a},s)=>e.jsxs(Se,{ref:s,className:Q("relative flex w-full touch-none select-none items-center",r),...a,children:[e.jsx(bt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(yt,{className:"absolute h-full bg-primary"})}),e.jsx(vt,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ke.displayName=Se.displayName;const te={sortBy:"best-match",maxPrice:2e4,hasPromotions:!1,acceptsGroups:!1,establishmentType:"all"};function wt({isOpen:r,onClose:a,onApply:s,initialFilters:o}){const{t:n}=se(),[l,i]=p.useState(o||te);if(!r)return null;const m=()=>{s(l),a()},g=()=>{i(te)},h=[{id:"best-match",icon:le,label:n("filters.bestMatch","Mejor coincidencia")},{id:"nearest",icon:oe,label:n("filters.nearest","Más cercanos")},{id:"top-rated",icon:Ie,label:n("filters.topRated","Mejor valorado")}],y=[{id:"hasPromotions",icon:Fe,label:n("filters.hasPromotions","Ofrece promociones")},{id:"acceptsGroups",icon:Ve,label:n("filters.acceptsGroups","Acepta grupos")}],u=[{id:"all",label:n("filters.allTypes","Todos")},{id:"women-only",label:n("filters.womenOnly","Solo mujeres")},{id:"men-only",label:n("filters.menOnly","Solo hombres")}];return e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:a}),e.jsxs("div",{className:"relative bg-card w-full max-w-lg rounded-t-3xl sm:rounded-2xl max-h-[85vh] mb-24 sm:mb-0 overflow-y-auto animate-slide-up",children:[e.jsxs("div",{className:"sticky top-0 bg-card z-10 flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:n("filters.title","Filtros")}),e.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-secondary transition-colors",children:e.jsx(ne,{className:"w-5 h-5 text-muted-foreground"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:n("filters.filterBy","Filtrar por")}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:h.map(c=>{const b=c.icon,w=l.sortBy===c.id;return e.jsxs("button",{onClick:()=>i({...l,sortBy:c.id}),className:`flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${w?"border-primary bg-primary/5":"border-border hover:border-primary/30"}`,children:[e.jsx(b,{className:`w-6 h-6 ${w?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:`text-xs text-center font-medium ${w?"text-primary":"text-foreground"}`,children:c.label})]},c.id)})})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground",children:n("filters.maxPrice","Precio máx.")}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:["DOP ",l.maxPrice.toLocaleString(),"+"]})]}),e.jsx(ke,{value:[l.maxPrice],onValueChange:([c])=>i({...l,maxPrice:c}),max:2e4,min:500,step:500,className:"w-full"})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:n("filters.bookingOptions","Opciones de reserva")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(c=>{const b=c.icon,w=l[c.id];return e.jsxs("button",{onClick:()=>i({...l,[c.id]:!l[c.id]}),className:`flex items-center gap-2 px-4 py-2.5 rounded-full border transition-all ${w?"border-primary bg-primary/5 text-primary":"border-border text-foreground hover:border-primary/30"}`,children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:c.label})]},c.id)})})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:n("filters.establishmentType","Tipo de establecimiento")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(c=>{const b=l.establishmentType===c.id;return e.jsx("button",{onClick:()=>i({...l,establishmentType:c.id}),className:`px-4 py-2.5 rounded-full border transition-all ${b?"border-primary bg-primary text-primary-foreground":"border-border text-foreground hover:border-primary/30"}`,children:e.jsx("span",{className:"text-sm font-medium",children:c.label})},c.id)})})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-card border-t border-border p-4 flex items-center gap-4",children:[e.jsx("button",{onClick:g,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:n("filters.clearAll","Eliminar todos")}),e.jsx(_e,{onClick:m,className:"flex-1 h-12 rounded-full bg-foreground text-background hover:bg-foreground/90",children:n("filters.apply","Aplicar")})]})]})]})}const jt=[{id:"all",label:"all",count:34},{id:"hair-salon",label:"hair-salon",count:2},{id:"nails",label:"nails",count:2},{id:"eyebrows-lashes",label:"eyebrows-lashes",count:2},{id:"beauty-salon",label:"beauty-salon",count:2},{id:"medspa",label:"medspa",count:2},{id:"barber",label:"barber",count:2},{id:"massage",label:"massage",count:2},{id:"spa-sauna",label:"spa-sauna",count:2},{id:"waxing",label:"waxing",count:2},{id:"tattoo-piercing",label:"tattoo-piercing",count:2},{id:"tanning",label:"tanning",count:2},{id:"fitness-recovery",label:"fitness-recovery",count:2},{id:"physical-therapy",label:"physical-therapy",count:2},{id:"health-practice",label:"health-practice",count:2},{id:"pet-grooming",label:"pet-grooming",count:2},{id:"restaurant",label:"restaurant",count:2},{id:"other",label:"other",count:2}],re={all:G,"hair-salon":$e,nails:ee,"eyebrows-lashes":Ke,"beauty-salon":le,medspa:tt,barber:qe,massage:ee,"spa-sauna":Qe,waxing:We,"tattoo-piercing":Ze,tanning:He,"fitness-recovery":Ge,"physical-therapy":Ue,"health-practice":et,"pet-grooming":Xe,other:Ye},L=r=>{if(!r)return"other";const a=r.toLowerCase().replace(/_/g,"-").trim();return{salon:"hair-salon","hair-salon":"hair-salon",hair_salon:"hair-salon",peluqueria:"hair-salon",peluquería:"hair-salon",peluquerias:"hair-salon",peluquerías:"hair-salon",barberia:"barber",barbería:"barber",barber:"barber",barberias:"barber",barberías:"barber",nails:"nails",uñas:"nails",unas:"nails",nail:"nails","nail-art":"nails",nail_art:"nails",manicure:"nails",pedicure:"nails",spa:"spa-sauna","spa-sauna":"spa-sauna",spa_sauna:"spa-sauna",sauna:"spa-sauna",beauty:"beauty-salon","beauty-salon":"beauty-salon",beauty_salon:"beauty-salon",maquillaje:"beauty-salon",makeup:"beauty-salon",faciales:"beauty-salon",facial:"beauty-salon","facial-treatment":"beauty-salon","tratamiento-facial":"beauty-salon",massage:"massage",masaje:"massage",masajes:"massage",medspa:"medspa","med-spa":"medspa","medicina-estetica":"medspa","medicina-estética":"medspa","eyebrows-lashes":"eyebrows-lashes",eyebrows_lashes:"eyebrows-lashes",cejas:"eyebrows-lashes",pestañas:"eyebrows-lashes",pestanas:"eyebrows-lashes",microblading:"eyebrows-lashes",waxing:"waxing",depilacion:"waxing",depilación:"waxing",cera:"waxing","tattoo-piercing":"tattoo-piercing",tattoo_piercing:"tattoo-piercing",tattoo:"tattoo-piercing",tatuaje:"tattoo-piercing",tatuajes:"tattoo-piercing",piercing:"tattoo-piercing",piercings:"tattoo-piercing",tanning:"tanning",bronceado:"tanning",autobronceado:"tanning","fitness-recovery":"fitness-recovery",fitness_recovery:"fitness-recovery",fitness:"fitness-recovery",recovery:"fitness-recovery",recuperacion:"fitness-recovery",recuperación:"fitness-recovery","physical-therapy":"physical-therapy",physical_therapy:"physical-therapy",fisioterapia:"physical-therapy",fisio:"physical-therapy","terapia-fisica":"physical-therapy","terapia-física":"physical-therapy","health-practice":"health-practice",health_practice:"health-practice",salud:"health-practice","medicina-alternativa":"health-practice",naturopatia:"health-practice",naturopatía:"health-practice","pet-grooming":"pet-grooming",pet_grooming:"pet-grooming",grooming:"pet-grooming","peluqueria-canina":"pet-grooming","peluquería-canina":"pet-grooming",mascotas:"pet-grooming"}[a]||a},qt=()=>{const[r,a]=p.useState(""),[s,o]=p.useState(null),[n,l]=p.useState(!1),[i,m]=p.useState({sortBy:"best-match",maxPrice:2e4,hasPromotions:!1,acceptsGroups:!1,establishmentType:"all"}),g=ae(),{t:h}=se(),{user:y,isGuest:u}=Re(),{establishments:c,loading:b}=Oe(),{isFavorite:w,toggleFavorite:k}=Le(),j=p.useCallback(t=>{const d=[];return t.category&&d.push(L(t.category)),t.primary_category&&d.push(L(t.primary_category)),t.secondary_categories&&Array.isArray(t.secondary_categories)&&t.secondary_categories.forEach(f=>{f&&d.push(L(f))}),[...new Set(d)]},[]),x=p.useMemo(()=>c.map(t=>({id:t.id,name:t.name,description:t.description||"",rating:Number(t.rating)||0,reviewCount:t.review_count||0,distance:"N/A",category:L(t.category||t.primary_category),imageUrl:t.main_image||"",images:t.main_image?[t.main_image]:[],isFavorite:w(t.id),closingTime:"8:00 PM",allCategories:j(t)})),[c,w,j]),P=p.useCallback(t=>{const d=t.toLowerCase().trim(),f=[d];return(d.includes("peluquería")||d.includes("peluqueria"))&&f.push("barbería","barberia","barber"),(d.includes("barbería")||d.includes("barberia")||d.includes("barber"))&&f.push("peluquería","peluqueria"),f},[]),N=p.useCallback((t,d)=>{const f=t.toLowerCase();return d.some(E=>{const v=E.toLowerCase();return(f==="hair-salon"||f==="barber")&&(v.includes("peluquería")||v.includes("peluqueria")||v.includes("barbería")||v.includes("barberia")||v.includes("barber"))?!0:f.includes(v)||v.includes(f)})},[]),S=p.useCallback(t=>{if(!t)return[];const d=[t];return t==="hair-salon"&&d.push("barber"),t==="barber"&&d.push("hair-salon"),d},[]),A=p.useCallback((t,d)=>{if(!d)return!0;const f=d.toLowerCase().trim(),E=P(f),v=h(`categories.${t}`).toLowerCase(),C=t.toLowerCase(),R=L(f);return E.some(_=>{const D=_.toLowerCase();return v.includes(D)||D.includes(v)||C.includes(D)||D.includes(C)||R===t||L(D)===t})},[P,h]),B=p.useMemo(()=>{const t={};x.forEach(f=>{(f.allCategories||[f.category||"other"]).forEach(v=>{const C=v||"other";t[C]=(t[C]||0)+1})});let d=jt.filter(f=>f.id!=="all").map(f=>({...f,count:t[f.id]||0}));return r&&(d=d.filter(f=>A(f.id,r))),d.concat([{id:"all",label:"all",count:x.length}])},[x,r,A]),z=p.useMemo(()=>x.filter(t=>{if(!r&&!s)return!0;const d=t.allCategories||[t.category||"other"];let f=!0;if(r){const v=P(r),C=t.name.toLowerCase(),R=t.description.toLowerCase(),_=v.some(q=>C.includes(q.toLowerCase())||R.includes(q.toLowerCase())),D=d.some(q=>N(q,v));f=_||D}const E=s?S(s).some(v=>d.includes(v)):!0;return f&&E}),[x,r,s,P,N,S]),H=p.useCallback(async t=>{if(!y&&!u){U({title:h("common.error"),description:"Debes iniciar sesión para guardar favoritos",variant:"destructive"});return}if(u){U({title:h("common.error"),description:"Los invitados no pueden guardar favoritos. Crea una cuenta.",variant:"destructive"});return}const{error:d}=await k(t);d&&U({title:h("common.error"),description:"No se pudo actualizar favoritos",variant:"destructive"})},[y,u,k,h]),$=t=>{o(t==="all"||t===s?null:t)},T=r||s;return B.find(t=>t.id===s),b?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(De,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"px-4 py-4 max-w-lg mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h1",{className:"text-xl font-bold text-foreground",children:h("search.title")})}),e.jsx(rt,{value:r,onChange:a,placeholder:h("search.placeholder"),onMapClick:()=>g("/map"),onFilterClick:()=>l(!0)})]})}),e.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-6",children:[e.jsxs("section",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3",children:h("search.categories")}),s?e.jsx("button",{onClick:()=>o(null),className:"flex items-center gap-3 p-4 rounded-xl border bg-primary text-primary-foreground border-primary shadow-card w-full",children:(()=>{const t=re[s]||G;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gray-100",children:e.jsx(t,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("span",{className:"font-medium text-sm text-primary-foreground",children:h(`categories.${s}`)}),e.jsxs("p",{className:"text-xs text-primary-foreground/70",children:[z.length," ",h("common.results")]})]}),e.jsx(ne,{className:"w-5 h-5 text-primary-foreground"})]})})()}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:B.filter(t=>t.id!=="all").map(t=>{const d=re[t.id]||G;return e.jsxs("button",{onClick:()=>$(t.id),className:Q("flex items-center gap-3 p-4 rounded-xl border transition-all duration-200",t.count>0?"bg-card border-border hover:border-primary/30":"bg-card/50 border-border/50 opacity-60"),children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gray-100",children:e.jsx(d,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-medium text-sm text-foreground",children:h(`categories.${t.id}`)}),e.jsxs("p",{className:Q("text-xs",t.count>0?"text-muted-foreground":"text-muted-foreground/60"),children:[t.count," ",h("common.results")]})]})]},t.id)})})]}),T&&e.jsxs("section",{className:"space-y-4 animate-fade-in px-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[z.length," ",h("common.results"),r&&` ${h("search.resultsFor")} "${r}"`]})}),z.map((t,d)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${d*.05}s`},children:e.jsx(J,{business:t,onToggleFavorite:H})},t.id)),z.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:h("common.noResults")})})]}),!T&&e.jsxs("section",{className:"space-y-4 animate-fade-in px-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.length," ",h("common.results")]})}),x.map((t,d)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${d*.05}s`},children:e.jsx(J,{business:t,onToggleFavorite:H})},t.id))]})]}),e.jsx(wt,{isOpen:n,onClose:()=>l(!1),onApply:t=>m(t),initialFilters:i}),!n&&e.jsx(Ee,{})]})};export{qt as default};
