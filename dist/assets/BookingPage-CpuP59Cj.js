import{v as Qe,T as Ge,U as Je,r as i,b as xe,j as e,c as Pe,V as Ae,W as Ke,S as Xe,n as Ze,u as et,x as O,B as R,N as tt,C as ie,Q as $}from"./index-Dp23U08K.js";import{I as ce}from"./input-Bclr7GY5.js";import{L as le}from"./label-B4eyMtOE.js";import{C as st}from"./chevron-right-DF-M4CiK.js";import{s as Ce,f as A}from"./format-DJJEFvfb.js";import{f as nt}from"./fr-DYoPy0LQ.js";import{u as rt}from"./useTimeFormat-BtQXJZP6.js";import{U as me}from"./user-CXs9r0oM.js";import{C as ue}from"./check-D8cRRPHq.js";import{S as Z}from"./skeleton-CiN1Txf8.js";import{u as ot}from"./useAppointments-72nT_vRO.js";import{a as at}from"./useEstablishments-DCn15D0H.js";import{u as it,g as ct}from"./useBusinessHours-DTUHdG5D.js";import{A as Ie}from"./arrow-left-BN-C9m26.js";import{C as lt}from"./calendar-BgWJMPsN.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=Qe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);function de(o,l){const a=Ge(o);return isNaN(l)?Je(o,NaN):(l&&a.setDate(a.getDate()+l),a)}function Te(o,l){const a=Ce(o),n=Ce(l);return+a==+n}function mt({selected:o,onSelect:l}){const[a,n]=i.useState(new Date),{i18n:t}=xe(),S=Array.from({length:7},(c,f)=>de(a,f)),g=(()=>{switch(t.language){case"en":return Ke;case"fr":return nt;default:return Ae}})(),j=()=>n(de(a,-7)),h=()=>n(de(a,7));return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:j,className:"p-2 rounded-lg hover:bg-secondary transition-colors",children:e.jsx(dt,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx("span",{className:"font-medium text-foreground capitalize",children:A(a,"MMMM yyyy",{locale:g})}),e.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-secondary transition-colors",children:e.jsx(st,{className:"w-5 h-5 text-muted-foreground"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:S.map(c=>{const f=o&&Te(c,o),M=Te(c,new Date);return e.jsxs("button",{onClick:()=>l(c),className:Pe("flex flex-col items-center py-3 rounded-xl transition-all duration-200",f?"bg-primary text-primary-foreground shadow-card":M?"bg-coral-light text-coral":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:[e.jsx("span",{className:"text-xs font-medium uppercase",children:A(c,"EEE",{locale:g})}),e.jsx("span",{className:"text-lg font-bold mt-1",children:A(c,"d")})]},c.toISOString())})})]})}function ut({slots:o,selected:l,onSelect:a}){const{formatTime:n}=rt();return e.jsx("div",{className:"grid grid-cols-4 gap-2",children:o.map(t=>e.jsx("button",{onClick:()=>t.available&&a(t.id),disabled:!t.available,className:Pe("py-3 px-2 rounded-lg text-sm font-medium transition-all duration-200",t.available?l===t.id?"bg-primary text-primary-foreground shadow-card":"bg-secondary text-secondary-foreground hover:bg-secondary/80":"bg-muted text-muted-foreground/50 cursor-not-allowed line-through"),children:n(t.time)},t.id))})}function ft({services:o,staffMembers:l,onAssignmentsChange:a}){const{t:n}=xe(),[t,S]=i.useState([]);i.useEffect(()=>{const g=o.map(j=>({serviceId:j.id,serviceName:j.name,staffId:null}));S(g)},[o]);const B=(g,j)=>{const h=t.map(c=>c.serviceId===g?{...c,staffId:j}:c);S(h),a(h)};return o.length<=1?e.jsx("div",{className:"grid grid-cols-1 gap-3",children:l.map(g=>{var j,h;return e.jsxs("button",{onClick:()=>{var c;return B(((c=o[0])==null?void 0:c.id)||"",g.id)},className:`flex items-center gap-3 p-4 rounded-xl border transition-all duration-200 ${((j=t[0])==null?void 0:j.staffId)===g.id?"border-primary bg-primary/10":"border-border bg-card hover:border-primary/30"}`,children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-secondary flex items-center justify-center",children:e.jsx(me,{className:"w-6 h-6 text-muted-foreground"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-foreground",children:g.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:g.specialty})]}),((h=t[0])==null?void 0:h.staffId)===g.id&&e.jsx(ue,{className:"w-5 h-5 text-primary ml-auto"})]},g.id)})}):e.jsx("div",{className:"space-y-6",children:o.map((g,j)=>{const h=t.find(f=>f.serviceId===g.id),c=l.find(f=>f.id===(h==null?void 0:h.staffId));return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-foreground",children:g.name}),c&&e.jsx("span",{className:"text-sm text-primary font-medium",children:c.name})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:l.map(f=>e.jsxs("button",{onClick:()=>B(g.id,f.id),className:`flex items-center gap-3 p-3 rounded-lg border transition-all duration-200 ${(h==null?void 0:h.staffId)===f.id?"border-primary bg-primary/10":"border-border bg-card hover:border-primary/30"}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0",children:e.jsx(me,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{className:"text-left min-w-0",children:[e.jsx("p",{className:"font-medium text-foreground text-sm truncate",children:f.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:f.specialty})]}),(h==null?void 0:h.staffId)===f.id&&e.jsx(ue,{className:"w-4 h-4 text-primary ml-auto flex-shrink-0"})]},`${g.id}-${f.id}`))}),j<o.length-1&&e.jsx("div",{className:"border-b border-border pt-2"})]},g.id)})})}const C=o=>{const l=(o==null?void 0:o.length)>=5?o.substring(0,5):o,[a,n]=l.split(":").map(Number);return a*60+n},xt=o=>{const l=Math.floor(o/60),a=o%60;return`${l.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},V=(o,l,a)=>Math.max(l,Math.min(a,o)),fe=(o,l,a,n)=>o<n&&l>a;function Be(o){const l=[...o].sort((n,t)=>n.startMin-t.startMin),a=[];for(const n of l){if(a.length===0){a.push({...n});continue}const t=a[a.length-1];n.startMin<=t.endMin?t.endMin=Math.max(t.endMin,n.endMin):a.push({...n})}return a}function gt(o){const{openMin:l,closeMin:a,durationMin:n,breakStartMin:t,breakEndMin:S,busy:B,stepByDuration:g=!0,fallbackStepMin:j,minStartMin:h=0}=o;if(n<=0)return[];const c=a-n;if(c<l)return[];const f=Math.max(l,h),M=Be(B.map(m=>({startMin:V(m.startMin,f,a),endMin:V(m.endMin,f,a)})).filter(m=>m.endMin>m.startMin)),L=new Set;L.add(f);for(const m of M)L.add(m.endMin);t!=null&&S!=null&&L.add(S);const u=[...L].sort((m,x)=>m-x),W=new Set,P=(m,x)=>t==null||S==null?!1:fe(m,x,t,S),Y=(m,x)=>{let I=null;for(const w of M)fe(m,x,w.startMin,w.endMin)&&(I=I==null?w.endMin:Math.max(I,w.endMin));return I};for(const m of u){let x=V(m,f,c);for(;x<=c;){const I=x+n;if(P(x,I)&&S!=null){x=V(S,f,c+1);continue}const w=Y(x,I);if(w!=null){x=V(w,f,c+1);continue}W.add(x),g?x=x+n:j&&j>0?x=x+j:x=x+n}}return[...W].sort((m,x)=>m-x)}const Tt=()=>{var _e,we;const{id:o}=Xe(),l=Ze(),a=et(),{t:n}=xe(),{establishment:t,staff:S,loading:B,error:g,refetch:j}=at(o),h=(t==null?void 0:t.name)||"",c=i.useMemo(()=>{if(!t||!t.temporarily_closed)return!1;if(!t.closed_until)return t.temporarily_closed;const s=new Date(t.closed_until),r=new Date;return t.temporarily_closed===!0&&s>r},[t]);i.useEffect(()=>{if(!(t!=null&&t.temporarily_closed)||!(t!=null&&t.closed_until))return;const s=new Date(t.closed_until),r=new Date;if(s<=r)return;const y=s.getTime()-r.getTime(),d=setTimeout(()=>{j()},y+1e3);return()=>clearTimeout(d)},[t==null?void 0:t.closed_until,t==null?void 0:t.temporarily_closed,j]),i.useEffect(()=>{if(!(t!=null&&t.temporarily_closed)||!(t!=null&&t.closed_until))return;const s=setInterval(()=>{new Date(t.closed_until)<=new Date&&j()},3e4);return()=>clearInterval(s)},[t==null?void 0:t.closed_until,t==null?void 0:t.temporarily_closed,j]);const f=i.useMemo(()=>{if(!c||!(t!=null&&t.closed_until))return null;try{const s=new Date(t.closed_until);return A(s,"HH:mm")}catch{return null}},[c,t==null?void 0:t.closed_until]),M=((_e=l.state)==null?void 0:_e.services)||[],{createAppointment:L}=ot(),[u,W]=i.useState(null),[P,Y]=i.useState(null),[m,x]=i.useState([]),[I,w]=i.useState(!1),[ge,$e]=i.useState([]),[pe,Q]=i.useState({}),[G,Le]=i.useState(""),[E,qe]=i.useState(""),[he,Fe]=i.useState(""),[J,ee]=i.useState(""),[F,U]=i.useState(""),b=i.useMemo(()=>S.length>0?S.map(s=>{var r;return{id:s.id,name:s.full_name||n("common.noName"),specialty:((r=s.specialties)==null?void 0:r.join(", "))||""}}):[],[S,n]),D=b.length>0,te=i.useMemo(()=>D?b.map(s=>s.id):["__owner__"],[D,b]),se=i.useMemo(()=>{var s;return D?b.length===1?b[0].id:((s=m[0])==null?void 0:s.staffId)||null:null},[D,b,m]),{hours:Ue,isClosed:ne}=it((t==null?void 0:t.id)||o,u||void 0),He=ct(o),T=Ue||He,re=i.useMemo(()=>{const s=M.reduce((r,y)=>r+(Number(y.duration)||0),0);return s>0?s:30},[M]);i.useEffect(()=>{(async()=>{if(!u){Q({});return}if(!D||b.length===0){Q({});return}const r=(t==null?void 0:t.id)||o,y=u.getDay(),d=b.map(v=>v.id),{data:k,error:p}=await O.from("staff_schedules").select("staff_id, start_time, end_time, is_available").eq("business_id",r).eq("day_of_week",y).in("staff_id",d);if(p){console.error("Error fetching staff day schedules:",p),Q({});return}const N={};for(const v of k||[])v.staff_id&&(N[v.staff_id]={startMin:C(v.start_time),endMin:C(v.end_time),isAvailable:v.is_available!==!1});Q(N)})()},[u,D,b,t==null?void 0:t.id,o]);const q=i.useCallback(async()=>{if(!u||!o)return;const s=A(u,"yyyy-MM-dd"),r=(t==null?void 0:t.id)||o,{data:y,error:d}=await O.from("appointments").select("staff_id, start_time, end_time, duration_minutes, status").eq("business_id",r).eq("date",s).in("status",["pending","confirmed","arrived","started"]);if(d){console.error("Error fetching day appointments:",d);return}$e(y||[])},[u,o,t==null?void 0:t.id]);i.useEffect(()=>{if(q(),!u)return;const s=(t==null?void 0:t.id)||o,r=A(u,"yyyy-MM-dd"),y=O.channel(`appointments-${s}`).on("postgres_changes",{event:"*",schema:"public",table:"appointments",filter:`business_id=eq.${s}`},d=>{const k=d.new,p=d.old,N=k==null?void 0:k.date,v=p==null?void 0:p.date;(N===r||v===r)&&q()}).subscribe();return()=>{O.removeChannel(y)}},[q,u,t==null?void 0:t.id,o]),i.useEffect(()=>{if(!D||b.length!==1||M.length===0||m.length>0)return;const s=b[0].id;x(M.map(r=>({serviceId:r.id,serviceName:r.name,staffId:s})))},[D,b,M,m.length]);const oe=i.useMemo(()=>C(T.openTime),[T.openTime]),ae=i.useMemo(()=>C(T.closeTime),[T.closeTime]),be=i.useMemo(()=>T.lunchStart?C(T.lunchStart):null,[T.lunchStart]),ye=i.useMemo(()=>T.lunchEnd?C(T.lunchEnd):null,[T.lunchEnd]),je=i.useMemo(()=>{const s=new Map;for(const r of te)s.set(r,[]);for(const r of ge){if(!r.start_time)continue;const y=C(r.start_time),d=r.duration_minutes??(r.end_time?null:30),k=r.end_time&&r.end_time.length>=5?C(r.end_time):y+(d||30),p={startMin:y,endMin:k};if(r.staff_id){const N=r.staff_id,v=s.get(N)||[];v.push(p),s.set(N,v)}else for(const N of te){const v=s.get(N)||[];v.push(p),s.set(N,v)}}for(const[r,y]of s.entries())s.set(r,Be(y));return s},[ge,te]),K=i.useMemo(()=>{if(!u)return!1;const s=new Date;return u.getDate()===s.getDate()&&u.getMonth()===s.getMonth()&&u.getFullYear()===s.getFullYear()},[u]),Ne=i.useMemo(()=>{if(!K)return 0;const s=new Date;return s.getHours()*60+s.getMinutes()+15},[K]),ve=i.useMemo(()=>{if(!u)return[];if(c)return[];if(ne)return[];const s=re,r=d=>{const k=je.get(d)||[],p=pe[d];if(p&&p.isAvailable===!1)return[];const N=p?Math.max(oe,p.startMin):oe,v=p?Math.min(ae,p.endMin):ae;return gt({openMin:N,closeMin:v,durationMin:s,breakStartMin:be,breakEndMin:ye,busy:k,stepByDuration:!0,minStartMin:K?Ne:0})};if(!D)return r("__owner__");if(b.length===1)return r(b[0].id);if(se)return r(se);const y=new Set;for(const d of b)for(const k of r(d.id))y.add(k);return[...y].sort((d,k)=>d-k)},[u,c,ne,re,je,oe,ae,be,ye,D,b,se,pe,K,Ne]),X=i.useMemo(()=>ve.map(s=>{const r=xt(s);return{id:r,time:r,available:!0}}),[ve]);i.useEffect(()=>{if(!P)return;X.some(r=>r.id===P&&r.available)||Y(null)},[P,X]);const Me=M.reduce((s,r)=>s+r.price,0),ze=M.reduce((s,r)=>s+r.duration,0),Oe=b.length===0||(M.length>1?m.every(s=>s.staffId!==null):m.length>0&&((we=m[0])==null?void 0:we.staffId)!==null),H=s=>s.replace(/\D/g,"").length,ke=s=>{const r=H(s);return r>=9&&r<=14},Re=()=>{let s=!0;return G.trim()?ee(""):(ee(n("booking.nameRequired")||"El nombre es obligatorio"),s=!1),E.trim()?ke(E)?U(""):(H(E)<9?U(n("booking.phoneMinDigits")||"El teléfono debe tener mínimo 9 dígitos"):U(n("booking.phoneMaxDigits")||"El teléfono debe tener máximo 14 dígitos"),s=!1):(U(n("booking.phoneRequired")||"El teléfono es obligatorio"),s=!1),s},Se=!c&&u&&P&&Oe&&G.trim()&&E.trim()&&ke(E),Ve=s=>{x(s)},We=async()=>{var r,y;if(c){$({title:n("booking.temporarilyClosedTitle"),description:n("booking.temporarilyClosedMessage"),variant:"destructive"});return}if(!Re()){$({title:n("common.error"),description:n("booking.validationError")||"Por favor completa todos los campos requeridos correctamente",variant:"destructive"});return}if(!Se||!u||!P)return;w(!0);const s=X.find(d=>d.id===P);if(!s){w(!1),$({title:n("common.error"),description:"Selecciona un horario válido.",variant:"destructive"});return}try{const d=A(u,"yyyy-MM-dd"),k=(t==null?void 0:t.id)||o,{data:p}=await O.from("appointments").select("staff_id, start_time, end_time, duration_minutes, status").eq("business_id",k).eq("date",d).in("status",["pending","confirmed","arrived","started"]),N=C(s.time),v=N+re,z=_=>{if(!(_!=null&&_.start_time))return!1;const Ee=C(_.start_time),Ye=_.end_time?C(_.end_time):Ee+(_.duration_minutes||30);return fe(N,v,Ee,Ye)},De=D?b.length===1?b[0].id:((r=m[0])==null?void 0:r.staffId)||null:null;if((p||[]).some(_=>!D||b.length===1||!De||_.staff_id==null||_.staff_id===De?z(_):!1)){w(!1),$({title:n("common.error"),description:"Ese horario ya fue reservado. Selecciona otro.",variant:"destructive"}),await q();return}}catch(d){console.error("Pre-insert availability check failed:",d)}try{const d=(t==null?void 0:t.id)||o||"",k=((y=m[0])==null?void 0:y.staffId)||void 0,{error:p}=await L({establishment_id:d,staff_id:k,client_name:G,client_email:he||void 0,client_phone:E||void 0,date:A(u,"yyyy-MM-dd"),start_time:(s==null?void 0:s.time)||"09:00",price:Me,duration_minutes:ze,services:M.map(N=>({id:N.id,name:N.name,price:N.price,duration_minutes:N.duration}))});if(p){console.error("Error saving appointment:",p),$({title:n("common.error"),description:p.includes("exclusion")||p.includes("overlap")?"Ese horario ya fue reservado. Selecciona otro.":"No se pudo crear la reserva. Intenta de nuevo.",variant:"destructive"}),await q();return}$({title:n("booking.bookingConfirmed"),description:`${n("booking.bookingConfirmedDesc")} ${h} - ${A(u,"PPP",{locale:Ae})} ${s==null?void 0:s.time}`}),await q(),setTimeout(()=>{a("/appointments")},100)}catch(d){console.error("Error:",d),$({title:n("common.error"),description:"No se pudo crear la reserva. Intenta de nuevo.",variant:"destructive"})}finally{w(!1)}};return B?e.jsxs("div",{className:"min-h-screen bg-background pb-32",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>a(-1),children:e.jsx(Ie,{className:"w-5 h-5"})}),e.jsx(Z,{className:"h-5 w-32"})]})}),e.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-4",children:[e.jsx(Z,{className:"h-32 rounded-xl"}),e.jsx(Z,{className:"h-48 rounded-xl"}),e.jsx(Z,{className:"h-64 rounded-xl"})]})]}):g||!t?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:n("common.error")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:n("business.notFound")}),e.jsx(R,{variant:"coral",onClick:()=>a("/"),children:n("common.goBack")})]})}):M.length===0?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:n("booking.noServices")}),e.jsx("p",{className:"text-muted-foreground mb-4",children:n("booking.selectServicesFirst")}),e.jsx(R,{variant:"coral",onClick:()=>a(`/business/${o}`),children:n("common.goBack")})]})}):e.jsxs("div",{className:"min-h-screen bg-background pb-32",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(tt,{to:`/business/${o}`,children:e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(Ie,{className:"w-5 h-5"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-foreground",children:n("booking.title")}),e.jsx("p",{className:"text-xs text-muted-foreground",children:h})]})]})}),e.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-8",children:[e.jsxs("section",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3",children:n("booking.selectedServices")}),e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4 space-y-2",children:[M.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-success"}),e.jsx("span",{className:"text-foreground",children:s.name})]}),e.jsxs("span",{className:"text-muted-foreground text-sm",children:[s.duration," ",n("booking.min")]})]},s.id)),e.jsxs("div",{className:"border-t border-border pt-2 mt-2 flex justify-between",children:[e.jsx("span",{className:"font-medium text-foreground",children:n("booking.total")}),e.jsxs("span",{className:"font-bold text-foreground",children:["RD$ ",Me.toLocaleString()]})]})]})]}),e.jsxs("section",{className:"animate-fade-in",style:{animationDelay:"0.05s"},children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3",children:n("booking.yourData")}),e.jsxs("div",{className:"bg-card rounded-xl border border-border p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(le,{htmlFor:"clientName",children:[n("booking.name")," *"]}),e.jsx(ce,{id:"clientName",placeholder:n("booking.namePlaceholder"),value:G,onChange:s=>{Le(s.target.value),J&&ee("")},className:J?"border-destructive":""}),J&&e.jsx("p",{className:"text-sm text-destructive",children:J})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(le,{htmlFor:"clientPhone",children:[n("booking.phone")," *"]}),e.jsx(ce,{id:"clientPhone",type:"tel",placeholder:"+1 809 555 1234",value:E,onChange:s=>{qe(s.target.value),F&&U("")},className:F?"border-destructive":"",maxLength:20}),F&&e.jsx("p",{className:"text-sm text-destructive",children:F}),!F&&E&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[H(E)," dígitos ",H(E)<9||H(E)>14?"(requiere 9-14)":""]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(le,{htmlFor:"clientEmail",children:n("booking.email")}),e.jsx(ce,{id:"clientEmail",type:"email",placeholder:"tu@email.com",value:he,onChange:s=>Fe(s.target.value)})]})]})]}),b.length>0&&e.jsxs("section",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4"}),M.length>1?n("booking.assignProfessionals"):n("booking.selectProfessional")]}),e.jsx("div",{className:"bg-card rounded-xl border border-border p-4",children:e.jsx(ft,{services:M,staffMembers:b,onAssignmentsChange:Ve})})]}),e.jsxs("section",{className:"animate-fade-in",style:{animationDelay:"0.15s"},children:[e.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),n("booking.selectDate")]}),e.jsx("div",{className:"bg-card rounded-xl border border-border p-4",children:e.jsx(mt,{selected:u,onSelect:W})})]}),u&&e.jsxs("section",{className:"animate-fade-in",children:[e.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),n("booking.availableTimes")]}),e.jsx("div",{className:"bg-card rounded-xl border border-border p-4",children:c?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ie,{className:"w-12 h-12 text-destructive mx-auto mb-3"}),e.jsx("p",{className:"text-lg font-medium text-foreground",children:n("booking.temporarilyClosedTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n("booking.temporarilyClosedMessage")}),f&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[n("booking.temporarilyClosedReopens")," ",f]})]}):ne?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ie,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-lg font-medium text-foreground",children:n("booking.closedTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n("booking.closedMessage")})]}):e.jsx(ut,{slots:X,selected:P,onSelect:Y})})]}),e.jsxs("section",{className:"animate-fade-in bg-info/10 rounded-xl p-4",children:[e.jsx("p",{className:"text-sm text-info font-medium",children:n("booking.paymentInfo")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n("booking.paymentNote")})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border p-4 shadow-elevated z-50",style:{paddingBottom:"calc(1rem + env(safe-area-inset-bottom))"},children:e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsx(R,{variant:"coral",size:"xl",className:"w-full",disabled:!Se||I,onClick:We,children:n(I?"booking.confirming":"booking.confirmBooking")})})})]})};export{Tt as default};
