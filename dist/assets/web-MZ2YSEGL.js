import{av as G}from"./index-CqvD_sCs.js";class u extends G{constructor(){super()}parseJwt(e){const o=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(o).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(r)}async loadScript(e){return new Promise((t,o)=>{const r=document.createElement("script");r.src=e,r.async=!0,r.onload=()=>{t()},r.onerror=o,document.body.appendChild(r)})}}u.OAUTH_STATE_KEY="social_login_oauth_pending";class C extends u{constructor(){super(...arguments),this.clientId=null,this.redirectUrl=null,this.scriptLoaded=!1,this.scriptUrl="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",this.useProperTokenExchange=!1}async initialize(e,t,o=!1){this.clientId=e,this.redirectUrl=t||null,this.useProperTokenExchange=o,e&&await this.loadAppleScript()}async login(e){if(!this.clientId)throw new Error("Apple Client ID not set. Call initialize() first.");if(!this.scriptLoaded)throw new Error("Apple Sign-In script not loaded.");return new Promise((t,o)=>{var r,n;AppleID.auth.init({clientId:(r=this.clientId)!==null&&r!==void 0?r:"",scope:((n=e.scopes)===null||n===void 0?void 0:n.join(" "))||"name email",redirectURI:this.redirectUrl||window.location.href,state:e.state,nonce:e.nonce,usePopup:!0}),AppleID.auth.signIn().then(i=>{var a,s,l,c,p;let T=null;this.useProperTokenExchange?T=null:T={token:i.authorization.code||""};const f=Object.assign({profile:{user:i.user||"",email:((a=i.user)===null||a===void 0?void 0:a.email)||null,givenName:((l=(s=i.user)===null||s===void 0?void 0:s.name)===null||l===void 0?void 0:l.firstName)||null,familyName:((p=(c=i.user)===null||c===void 0?void 0:c.name)===null||p===void 0?void 0:p.lastName)||null},accessToken:T,idToken:i.authorization.id_token||null},this.useProperTokenExchange&&{authorizationCode:i.authorization.code});t({provider:"apple",result:f})}).catch(i=>{o(i)})})}async logout(){console.log("Apple logout: Session should be managed on the client side")}async isLoggedIn(){return console.log("Apple login status should be managed on the client side"),{isLoggedIn:!1}}async getAuthorizationCode(){throw console.log("Apple authorization code should be stored during login"),new Error("Apple authorization code not available")}async refresh(){console.log("Apple refresh not available on web")}async loadAppleScript(){if(!this.scriptLoaded)return this.loadScript(this.scriptUrl).then(()=>{this.scriptLoaded=!0})}}class N extends u{constructor(){super(...arguments),this.appId=null,this.scriptLoaded=!1,this.locale="en_US"}async initialize(e,t){this.appId=e,t&&(this.locale=t),e&&(await this.loadFacebookScript(this.locale),FB.init({appId:this.appId,version:"v17.0",xfbml:!0,cookie:!0}))}async login(e){if(!this.appId)throw new Error("Facebook App ID not set. Call initialize() first.");return new Promise((t,o)=>{FB.login(r=>{r.status==="connected"?FB.api("/me",{fields:"id,name,email,picture"},n=>{var i,a;const s={accessToken:{token:r.authResponse.accessToken,userId:r.authResponse.userID},profile:{userID:n.id,name:n.name,email:n.email||null,imageURL:((a=(i=n.picture)===null||i===void 0?void 0:i.data)===null||a===void 0?void 0:a.url)||null,friendIDs:[],birthday:null,ageRange:null,gender:null,location:null,hometown:null,profileURL:null},idToken:null};t({provider:"facebook",result:s})}):o(new Error("Facebook login failed"))},{scope:e.permissions.join(",")})})}async logout(){return new Promise(e=>{FB.logout(()=>e())})}async isLoggedIn(){return new Promise(e=>{FB.getLoginStatus(t=>{e({isLoggedIn:t.status==="connected"})})})}async getAuthorizationCode(){return new Promise((e,t)=>{FB.getLoginStatus(o=>{var r;o.status==="connected"?e({accessToken:((r=o.authResponse)===null||r===void 0?void 0:r.accessToken)||""}):t(new Error("No Facebook authorization code available"))})})}async refresh(e){await this.login(e)}async loadFacebookScript(e){if(this.scriptLoaded)return;const t=document.querySelector('script[src*="connect.facebook.net"]');return t&&t.remove(),this.loadScript(`https://connect.facebook.net/${e}/sdk.js`).then(()=>{this.scriptLoaded=!0})}}class z extends u{constructor(){super(...arguments),this.clientId=null,this.loginType="online",this.GOOGLE_TOKEN_REQUEST_URL="https://www.googleapis.com/oauth2/v3/tokeninfo",this.GOOGLE_STATE_KEY="capgo_social_login_google_state"}async initialize(e,t,o,r){this.clientId=e,t&&(this.loginType=t),this.hostedDomain=o,this.redirectUrl=r}async login(e){if(!this.clientId)throw new Error("Google Client ID not set. Call initialize() first.");let t=e.scopes||[];t.length>0?(t.includes("https://www.googleapis.com/auth/userinfo.email")||t.push("https://www.googleapis.com/auth/userinfo.email"),t.includes("https://www.googleapis.com/auth/userinfo.profile")||t.push("https://www.googleapis.com/auth/userinfo.profile"),t.includes("openid")||t.push("openid")):t=["https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/userinfo.profile","openid"];const o=e.nonce||Math.random().toString(36).substring(2);return this.traditionalOAuth({scopes:t,nonce:o,hostedDomain:this.hostedDomain,prompt:e.prompt})}async logout(){if(this.loginType==="offline")return Promise.reject("Offline login doesn't store tokens. logout is not available");const e=this.getGoogleState();e&&await this.rawLogoutGoogle(e.accessToken)}async isLoggedIn(){if(this.loginType==="offline")return Promise.reject("Offline login doesn't store tokens. isLoggedIn is not available");const e=this.getGoogleState();if(!e)return{isLoggedIn:!1};try{const t=await this.accessTokenIsValid(e.accessToken),o=this.idTokenValid(e.idToken);if(t&&o)return{isLoggedIn:!0};try{await this.rawLogoutGoogle(e.accessToken,!1)}catch(r){console.error("Access token is not valid, but cannot logout",r)}return{isLoggedIn:!1}}catch(t){return Promise.reject(t)}}async getAuthorizationCode(){if(this.loginType==="offline")return Promise.reject("Offline login doesn't store tokens. getAuthorizationCode is not available");const e=this.getGoogleState();if(!e)throw new Error("No Google authorization code available");try{const t=await this.accessTokenIsValid(e.accessToken),o=this.idTokenValid(e.idToken);if(t&&o)return{accessToken:e.accessToken,jwt:e.idToken};try{await this.rawLogoutGoogle(e.accessToken,!1)}catch(r){console.error("Access token is not valid, but cannot logout",r)}throw new Error("No Google authorization code available")}catch(t){return Promise.reject(t)}}async refresh(){return Promise.reject("Not implemented")}handleOAuthRedirect(e){const t=e.searchParams,o=t.get("error");if(o)return localStorage.removeItem(u.OAUTH_STATE_KEY),{error:t.get("error_description")||o};const r=t.get("code");if(r&&t.has("scope"))return{provider:"google",result:{serverAuthCode:r,responseType:"offline"}};const n=e.hash.substring(1);if(console.log("handleOAuthRedirect",e.hash),!n)return null;const i=new URLSearchParams(n),a=i.get("error");if(a)return localStorage.removeItem(u.OAUTH_STATE_KEY),{error:i.get("error_description")||a};console.log("handleOAuthRedirect ok");const s=i.get("access_token"),l=i.get("id_token");if(s&&l){localStorage.removeItem(u.OAUTH_STATE_KEY);const c=this.parseJwt(l);return{provider:"google",result:{accessToken:{token:s},idToken:l,profile:{email:c.email||null,familyName:c.family_name||null,givenName:c.given_name||null,id:c.sub||null,name:c.name||null,imageUrl:c.picture||null},responseType:"online"}}}return null}async accessTokenIsValid(e){const t=`${this.GOOGLE_TOKEN_REQUEST_URL}?access_token=${encodeURIComponent(e)}`;try{const o=await fetch(t);if(!o.ok)return console.log(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. Response not successful. Status code: ${o.status}. Assuming that the token is not valid`),!1;const r=await o.text();if(!r)throw console.error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. Response body is null`),new Error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. Response body is null`);let n;try{n=JSON.parse(r)}catch(s){throw console.error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. Response body is not valid JSON. Error: ${s}`),new Error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. Response body is not valid JSON. Error: ${s}`)}const i=n.expires_in;if(i==null)throw console.error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. Response JSON does not include 'expires_in'.`),new Error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. Response JSON does not include 'expires_in'.`);let a;try{if(a=parseInt(i,10),isNaN(a))throw new Error("'expires_in' is not a valid integer")}catch(s){throw console.error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. 'expires_in': ${i} is not a valid integer. Error: ${s}`),new Error(`Invalid response from ${this.GOOGLE_TOKEN_REQUEST_URL}. 'expires_in': ${i} is not a valid integer. Error: ${s}`)}return a>5}catch(o){throw console.error(o),o}}idTokenValid(e){try{const t=this.parseJwt(e),o=Math.ceil(Date.now()/1e3)+5;return t.exp&&o<t.exp}catch{return!1}}async rawLogoutGoogle(e,t=null){if(t===null&&(t=await this.accessTokenIsValid(e)),t===!0){try{await fetch(`https://accounts.google.com/o/oauth2/revoke?token=${encodeURIComponent(e)}`),this.clearStateGoogle()}catch{}return}else{this.clearStateGoogle();return}}persistStateGoogle(e,t){try{window.localStorage.setItem(this.GOOGLE_STATE_KEY,JSON.stringify({accessToken:e,idToken:t}))}catch(o){console.error("Cannot persist state google",o)}}clearStateGoogle(){try{window.localStorage.removeItem(this.GOOGLE_STATE_KEY)}catch(e){console.error("Cannot clear state google",e)}}getGoogleState(){try{const e=window.localStorage.getItem(this.GOOGLE_STATE_KEY);if(!e)return null;const{accessToken:t,idToken:o}=JSON.parse(e);return{accessToken:t,idToken:o}}catch(e){return console.error("Cannot get state google",e),null}}async traditionalOAuth({scopes:e,hostedDomain:t,nonce:o,prompt:r}){var n;const i=[...new Set([...e||[],"openid"])],a=new URLSearchParams(Object.assign(Object.assign({client_id:(n=this.clientId)!==null&&n!==void 0?n:"",redirect_uri:this.redirectUrl||window.location.origin+window.location.pathname,response_type:this.loginType==="offline"?"code":"token id_token",scope:i.join(" ")},o&&{nonce:o}),{include_granted_scopes:"true",state:"popup"}));t!==void 0&&a.append("hd",t),r!==void 0&&a.append("prompt",r);const s=`https://accounts.google.com/o/oauth2/v2/auth?${a.toString()}`,l=500,c=600,p=window.screenX+(window.outerWidth-l)/2,T=window.screenY+(window.outerHeight-c)/2;localStorage.setItem(u.OAUTH_STATE_KEY,JSON.stringify({provider:"google",loginType:this.loginType}));const f=window.open(s,"Google Sign In",`width=${l},height=${c},left=${p},top=${T},popup=1`);let k,E;return new Promise((O,y)=>{if(!f){y(new Error("Failed to open popup"));return}const S=g=>{var A,v,I,m;if(!(g.origin!==window.location.origin||!((v=(A=g.data)===null||A===void 0?void 0:A.source)===null||v===void 0)&&v.startsWith("angular"))){if(((I=g.data)===null||I===void 0?void 0:I.type)==="oauth-response")if(window.removeEventListener("message",S),clearInterval(k),clearTimeout(E),this.loginType==="online"){const{accessToken:w,idToken:_}=g.data;if(w&&_){const d=this.parseJwt(_);this.persistStateGoogle(w.token,_),O({provider:"google",result:{accessToken:{token:w.token},idToken:_,profile:{email:d.email||null,familyName:d.family_name||null,givenName:d.given_name||null,id:d.sub||null,name:d.name||null,imageUrl:d.picture||null},responseType:"online"}})}}else{const{serverAuthCode:w}=g.data;O({provider:"google",result:{responseType:"offline",serverAuthCode:w}})}else if(((m=g.data)===null||m===void 0?void 0:m.type)==="oauth-error"){window.removeEventListener("message",S),clearInterval(k),clearTimeout(E);const w=g.data.error||"User cancelled the OAuth flow";y(new Error(w))}}};window.addEventListener("message",S),E=setTimeout(()=>{clearTimeout(E),window.removeEventListener("message",S),f.close(),y(new Error("OAuth timeout"))},3e5),k=setInterval(()=>{f.closed&&(clearInterval(k),y(new Error("Popup closed")))},1e3)})}}var K=function(h,e){var t={};for(var o in h)Object.prototype.hasOwnProperty.call(h,o)&&e.indexOf(o)<0&&(t[o]=h[o]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(h);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(h,o[r])&&(t[o[r]]=h[o[r]]);return t};class j extends u{constructor(){super(...arguments),this.clientId=null,this.redirectUrl=null,this.defaultScopes=["tweet.read","users.read"],this.forceLogin=!1,this.TOKENS_KEY="capgo_social_login_twitter_tokens_v1",this.STATE_PREFIX="capgo_social_login_twitter_state_"}async initialize(e,t,o,r,n){this.clientId=e,this.redirectUrl=t??null,o!=null&&o.length&&(this.defaultScopes=o),this.forceLogin=r??!1,this.audience=n??void 0}async login(e){var t,o,r,n,i,a;if(!this.clientId)throw new Error("Twitter Client ID not configured. Call initialize() first.");const s=(o=(t=e.redirectUrl)!==null&&t!==void 0?t:this.redirectUrl)!==null&&o!==void 0?o:window.location.origin+window.location.pathname,l=!((r=e.scopes)===null||r===void 0)&&r.length?e.scopes:this.defaultScopes,c=(n=e.state)!==null&&n!==void 0?n:this.generateState(),p=(i=e.codeVerifier)!==null&&i!==void 0?i:this.generateCodeVerifier(),T=await this.generateCodeChallenge(p);this.persistPendingLogin(c,{codeVerifier:p,redirectUri:s,scopes:l}),localStorage.setItem(u.OAUTH_STATE_KEY,JSON.stringify({provider:"twitter",state:c}));const f=new URLSearchParams({response_type:"code",client_id:this.clientId,redirect_uri:s,scope:l.join(" "),state:c,code_challenge:T,code_challenge_method:"S256"});((a=e.forceLogin)!==null&&a!==void 0?a:this.forceLogin)===!0&&f.set("force_login","true"),this.audience&&f.set("audience",this.audience);const k=`https://x.com/i/oauth2/authorize?${f.toString()}`,E=500,O=650,y=window.screenX+(window.outerWidth-E)/2,S=window.screenY+(window.outerHeight-O)/2,g=window.open(k,"XLogin",`width=${E},height=${O},left=${y},top=${S},popup=1`);return new Promise((A,v)=>{if(!g){v(new Error("Unable to open login window. Please allow popups."));return}const I=(d,b,L)=>{window.removeEventListener("message",d),clearTimeout(b),clearInterval(L)},m=d=>{var b,L,U,R;if(d.origin===window.location.origin){if(((b=d.data)===null||b===void 0?void 0:b.type)==="oauth-response"){if(!((L=d.data)===null||L===void 0)&&L.provider&&d.data.provider!=="twitter")return;I(m,w,_);const x=d.data,{provider:Y}=x,$=K(x,["provider"]);A({provider:"twitter",result:$})}else if(((U=d.data)===null||U===void 0?void 0:U.type)==="oauth-error"){if(!((R=d.data)===null||R===void 0)&&R.provider&&d.data.provider!=="twitter")return;I(m,w,_),v(new Error(d.data.error||"Twitter login was cancelled."))}}};window.addEventListener("message",m);const w=window.setTimeout(()=>{window.removeEventListener("message",m),g.close(),v(new Error("Twitter login timed out."))},3e5),_=window.setInterval(()=>{g.closed&&(window.removeEventListener("message",m),clearInterval(_),clearTimeout(w),v(new Error("Twitter login window was closed.")))},1e3)})}async logout(){localStorage.removeItem(this.TOKENS_KEY)}async isLoggedIn(){const e=this.getStoredTokens();if(!e)return{isLoggedIn:!1};const t=e.expiresAt>Date.now();return t||localStorage.removeItem(this.TOKENS_KEY),{isLoggedIn:t}}async getAuthorizationCode(){const e=this.getStoredTokens();if(!e)throw new Error("Twitter access token is not available.");return{accessToken:e.accessToken}}async refresh(){const e=this.getStoredTokens();if(!(e!=null&&e.refreshToken))throw new Error("No Twitter refresh token is available. Include offline.access scope to receive one.");await this.refreshWithRefreshToken(e.refreshToken)}async handleOAuthRedirect(e,t){const o=e.searchParams,r=t??o.get("state");if(!r)return null;const n=this.consumePendingLogin(r);if(!n)return localStorage.removeItem(u.OAUTH_STATE_KEY),{error:"Twitter login session expired or state mismatch."};const i=o.get("error");if(i)return localStorage.removeItem(u.OAUTH_STATE_KEY),{error:o.get("error_description")||i};const a=o.get("code");if(!a)return localStorage.removeItem(u.OAUTH_STATE_KEY),{error:"Twitter authorization code missing from redirect."};try{const s=await this.exchangeAuthorizationCode(a,n),l=await this.fetchProfile(s.access_token),c=Date.now()+s.expires_in*1e3,p=s.scope.split(" ").filter(Boolean);return this.persistTokens({accessToken:s.access_token,refreshToken:s.refresh_token,expiresAt:c,scope:p,tokenType:s.token_type,userId:l.id,profile:l}),{provider:"twitter",result:{accessToken:{token:s.access_token,tokenType:s.token_type,expires:new Date(c).toISOString(),userId:l.id},refreshToken:s.refresh_token,scope:p,tokenType:s.token_type,expiresIn:s.expires_in,profile:l}}}catch(s){return s instanceof Error?{error:s.message}:{error:"Twitter login failed unexpectedly."}}finally{localStorage.removeItem(u.OAUTH_STATE_KEY)}}async exchangeAuthorizationCode(e,t){var o;const r=new URLSearchParams({grant_type:"authorization_code",client_id:(o=this.clientId)!==null&&o!==void 0?o:"",code:e,redirect_uri:t.redirectUri,code_verifier:t.codeVerifier}),n=await fetch("https://api.x.com/2/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.text();throw new Error(`Twitter token exchange failed (${n.status}): ${i}`)}return await n.json()}async refreshWithRefreshToken(e){var t,o;const r=new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:(t=this.clientId)!==null&&t!==void 0?t:""}),n=await fetch("https://api.x.com/2/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const c=await n.text();throw new Error(`Twitter refresh failed (${n.status}): ${c}`)}const i=await n.json(),a=await this.fetchProfile(i.access_token),s=Date.now()+i.expires_in*1e3,l=i.scope.split(" ").filter(Boolean);this.persistTokens({accessToken:i.access_token,refreshToken:(o=i.refresh_token)!==null&&o!==void 0?o:e,expiresAt:s,scope:l,tokenType:i.token_type,userId:a.id,profile:a})}async fetchProfile(e){var t,o,r,n;const a=await fetch(`https://api.x.com/2/users/me?user.fields=${["profile_image_url","verified","name","username"].join(",")}`,{headers:{Authorization:`Bearer ${e}`}});if(!a.ok){const l=await a.text();throw new Error(`Unable to fetch Twitter profile (${a.status}): ${l}`)}const s=await a.json();if(!s.data)throw new Error("Twitter profile payload is missing data.");return{id:s.data.id,username:s.data.username,name:(t=s.data.name)!==null&&t!==void 0?t:null,profileImageUrl:(o=s.data.profile_image_url)!==null&&o!==void 0?o:null,verified:(r=s.data.verified)!==null&&r!==void 0?r:!1,email:(n=s.data.email)!==null&&n!==void 0?n:null}}persistTokens(e){localStorage.setItem(this.TOKENS_KEY,JSON.stringify(e))}getStoredTokens(){const e=localStorage.getItem(this.TOKENS_KEY);if(!e)return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse stored Twitter tokens",t),null}}persistPendingLogin(e,t){localStorage.setItem(`${this.STATE_PREFIX}${e}`,JSON.stringify(t))}consumePendingLogin(e){const t=`${this.STATE_PREFIX}${e}`,o=localStorage.getItem(t);if(localStorage.removeItem(t),!o)return null;try{return JSON.parse(o)}catch(r){return console.warn("Failed to parse pending Twitter login payload",r),null}}generateState(){return[...crypto.getRandomValues(new Uint8Array(16))].map(e=>e.toString(16).padStart(2,"0")).join("")}generateCodeVerifier(){const e=new Uint8Array(64);return crypto.getRandomValues(e),Array.from(e).map(t=>"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~"[t%66]).join("")}async generateCodeChallenge(e){const o=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",o);return this.base64UrlEncode(new Uint8Array(r))}base64UrlEncode(e){let t="";return e.forEach(o=>t+=String.fromCharCode(o)),btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}}class P extends G{constructor(){super(),this.googleProvider=new z,this.appleProvider=new C,this.facebookProvider=new N,this.twitterProvider=new j,localStorage.getItem(P.OAUTH_STATE_KEY)&&(console.log("OAUTH_STATE_KEY found"),this.handleOAuthRedirect().catch(e=>{console.error("Failed to finish OAuth redirect",e),window.close()}))}async handleOAuthRedirect(){var e,t,o;const r=new URL(window.location.href),n=localStorage.getItem(P.OAUTH_STATE_KEY);let i=null,a;if(n)try{const l=JSON.parse(n);i=(e=l.provider)!==null&&e!==void 0?e:null,a=l.state}catch{i=n==="true"?"google":null}let s=null;switch(i){case"twitter":s=await this.twitterProvider.handleOAuthRedirect(r,a);break;case"google":default:s=this.googleProvider.handleOAuthRedirect(r);break}if(s){if("error"in s){const l=i??null;(t=window.opener)===null||t===void 0||t.postMessage({type:"oauth-error",provider:l,error:s.error},window.location.origin)}else(o=window.opener)===null||o===void 0||o.postMessage(Object.assign({type:"oauth-response",provider:s.provider},s.result),window.location.origin);window.close()}}async initialize(e){var t,o,r,n;const i=[];!((t=e.google)===null||t===void 0)&&t.webClientId&&i.push(this.googleProvider.initialize(e.google.webClientId,e.google.mode,e.google.hostedDomain,e.google.redirectUrl)),!((o=e.apple)===null||o===void 0)&&o.clientId&&i.push(this.appleProvider.initialize(e.apple.clientId,e.apple.redirectUrl,e.apple.useProperTokenExchange)),!((r=e.facebook)===null||r===void 0)&&r.appId&&i.push(this.facebookProvider.initialize(e.facebook.appId,e.facebook.locale)),!((n=e.twitter)===null||n===void 0)&&n.clientId&&i.push(this.twitterProvider.initialize(e.twitter.clientId,e.twitter.redirectUrl,e.twitter.defaultScopes,e.twitter.forceLogin,e.twitter.audience)),await Promise.all(i)}async login(e){switch(e.provider){case"google":return this.googleProvider.login(e.options);case"apple":return this.appleProvider.login(e.options);case"facebook":return this.facebookProvider.login(e.options);case"twitter":return this.twitterProvider.login(e.options);default:throw new Error(`Login for ${e.provider} is not implemented on web`)}}async logout(e){switch(e.provider){case"google":return this.googleProvider.logout();case"apple":return this.appleProvider.logout();case"facebook":return this.facebookProvider.logout();case"twitter":return this.twitterProvider.logout();default:throw new Error(`Logout for ${e.provider} is not implemented`)}}async isLoggedIn(e){switch(e.provider){case"google":return this.googleProvider.isLoggedIn();case"apple":return this.appleProvider.isLoggedIn();case"facebook":return this.facebookProvider.isLoggedIn();case"twitter":return this.twitterProvider.isLoggedIn();default:throw new Error(`isLoggedIn for ${e.provider} is not implemented`)}}async getAuthorizationCode(e){switch(e.provider){case"google":return this.googleProvider.getAuthorizationCode();case"apple":return this.appleProvider.getAuthorizationCode();case"facebook":return this.facebookProvider.getAuthorizationCode();case"twitter":return this.twitterProvider.getAuthorizationCode();default:throw new Error(`getAuthorizationCode for ${e.provider} is not implemented`)}}async refresh(e){switch(e.provider){case"google":return this.googleProvider.refresh();case"apple":return this.appleProvider.refresh();case"facebook":return this.facebookProvider.refresh(e.options);case"twitter":return this.twitterProvider.refresh();default:throw new Error(`Refresh for ${e.provider} is not implemented`)}}async providerSpecificCall(e){throw new Error(`Provider specific call for ${e.call} is not implemented`)}async getPluginVersion(){return{version:"web"}}}P.OAUTH_STATE_KEY="social_login_oauth_pending";export{P as SocialLoginWeb};
