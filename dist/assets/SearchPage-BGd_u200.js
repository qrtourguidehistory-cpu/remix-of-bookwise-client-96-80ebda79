import{o as _,u as ue,j as e,r as m,g as Ee,e as ze,l as Be,i as F,f as H,h as q,k as Te,c as J,b as me,X as pe,B as Ie,a as Ve,J as Q,I as Fe}from"./index-uyy-nLXi.js";import{S as qe,B as Oe}from"./BottomNavigation-B6XVcwZM.js";import{I as He}from"./input-BmlGBm57.js";import{M as he}from"./map-pin-BXmmh278.js";import{c as fe,S as te,a as re,b as se,d as oe,e as ne,f as Ke}from"./select-DPZ0VoV-.js";import{u as $e}from"./index-ChlAfUwv.js";import{u as Ue}from"./index-DWYvebi1.js";import{H as ge,u as Ge}from"./useFavorites-Ck1NQ8YG.js";import{S as Qe}from"./star-C-fh17SS.js";import{T as Je}from"./tag-jAeT67r0.js";import{U as Ye}from"./users-DCsVsYQN.js";import{G as We}from"./globe-vLay6I9k.js";import{B as ie}from"./BusinessCard-CKUwwoQT.js";import{u as Xe}from"./useEstablishmentsQuery-DzjtOQsL.js";import{u as Ze}from"./useDebounce-CFXqmIlz.js";import{U as ea}from"./user-BJBy3O-U.js";import{E as aa}from"./eye-BczkIaRQ.js";import{S as ta}from"./scissors-pnEYl6Ka.js";import"./calendar-rMDyL2cc.js";import"./chevron-down-DFyqRVlc.js";import"./check-CB0uD3YZ.js";import"./chevron-up-CDgGDhcj.js";import"./ImageCarousel-D8qhqHhk.js";import"./chevron-left-ByU9rXxB.js";import"./chevron-right-D_GJDYNE.js";import"./OptimizedImage-mtxdObji.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=_("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=_("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=_("Dumbbell",[["path",{d:"M14.4 14.4 9.6 9.6",key:"ic80wn"}],["path",{d:"M18.657 21.485a2 2 0 1 1-2.829-2.828l-1.767 1.768a2 2 0 1 1-2.829-2.829l6.364-6.364a2 2 0 1 1 2.829 2.829l-1.768 1.767a2 2 0 1 1 2.828 2.829z",key:"nnl7wr"}],["path",{d:"m21.5 21.5-1.4-1.4",key:"1f1ice"}],["path",{d:"M3.9 3.9 2.5 2.5",key:"1evmna"}],["path",{d:"M6.404 12.768a2 2 0 1 1-2.829-2.829l1.768-1.767a2 2 0 1 1-2.828-2.829l2.828-2.828a2 2 0 1 1 2.829 2.828l1.767-1.768a2 2 0 1 1 2.829 2.829z",key:"yhosts"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=_("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=_("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=_("HandMetal",[["path",{d:"M18 12.5V10a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1.4",key:"wc6myp"}],["path",{d:"M14 11V9a2 2 0 1 0-4 0v2",key:"94qvcw"}],["path",{d:"M10 10.5V5a2 2 0 1 0-4 0v9",key:"m1ah89"}],["path",{d:"m7 15-1.76-1.76a2 2 0 0 0-2.83 2.82l3.6 3.6C7.5 21.14 9.2 22 12 22h2a8 8 0 0 0 8-8V7a2 2 0 1 0-4 0v5",key:"t1skq1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=_("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=_("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=_("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=_("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=_("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=_("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);function pa({value:t,onChange:s,placeholder:n="Buscar salones, servicios...",onMapClick:l,onFilterClick:r,showFilter:o=!0}){const i=ue(),d=()=>{l?l():i("/map")};return e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(qe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(He,{type:"text",value:t,onChange:g=>s(g.target.value),placeholder:n,className:"pl-12 pr-12 h-12 rounded-xl bg-secondary border-0 text-foreground placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-primary"}),e.jsx("button",{onClick:d,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors",children:e.jsx(he,{className:"w-4 h-4"})})]}),o&&r&&e.jsx("button",{onClick:r,className:"flex-shrink-0 p-3 rounded-xl bg-secondary text-foreground hover:bg-secondary/80 transition-colors",children:e.jsx(da,{className:"w-5 h-5"})})]})}var xe=["PageUp","PageDown"],be=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ye={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},O="Slider",[W,ha,fa]=Be(O),[ve]=ze(O,[fa]),[ga,U]=ve(O),je=m.forwardRef((t,s)=>{const{name:n,min:l=0,max:r=100,step:o=1,orientation:i="horizontal",disabled:d=!1,minStepsBetweenThumbs:g=0,defaultValue:h=[l],value:C,onValueChange:u=()=>{},onValueCommit:x=()=>{},inverted:k=!1,form:c,...b}=t,y=m.useRef(new Set),v=m.useRef(0),j=i==="horizontal"?xa:ba,[S=[],A]=Ee({prop:C,defaultProp:h,onChange:P=>{var a;(a=[...y.current][v.current])==null||a.focus(),u(P)}}),B=m.useRef(S);function T(P){const D=wa(S,P);L(P,D)}function K(P){L(P,v.current)}function I(){const P=B.current[v.current];S[v.current]!==P&&x(S)}function L(P,D,{commit:a}={commit:!1}){const p=Pa(o),f=Ma(Math.round((P-l)/o)*o+l,p),M=fe(f,[l,r]);A((w=[])=>{const N=ja(w,M,D);if(ka(N,g*o)){v.current=N.indexOf(M);const E=String(N)!==String(w);return E&&a&&x(N),E?N:w}else return w})}return e.jsx(ga,{scope:t.__scopeSlider,name:n,disabled:d,min:l,max:r,valueIndexToChangeRef:v,thumbs:y.current,values:S,orientation:i,form:c,children:e.jsx(W.Provider,{scope:t.__scopeSlider,children:e.jsx(W.Slot,{scope:t.__scopeSlider,children:e.jsx(j,{"aria-disabled":d,"data-disabled":d?"":void 0,...b,ref:s,onPointerDown:F(b.onPointerDown,()=>{d||(B.current=S)}),min:l,max:r,inverted:k,onSlideStart:d?void 0:T,onSlideMove:d?void 0:K,onSlideEnd:d?void 0:I,onHomeKeyDown:()=>!d&&L(l,0,{commit:!0}),onEndKeyDown:()=>!d&&L(r,S.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:D})=>{if(!d){const f=xe.includes(P.key)||P.shiftKey&&be.includes(P.key)?10:1,M=v.current,w=S[M],N=o*f*D;L(w+N,M,{commit:!0})}}})})})})});je.displayName=O;var[Se,we]=ve(O,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xa=m.forwardRef((t,s)=>{const{min:n,max:l,dir:r,inverted:o,onSlideStart:i,onSlideMove:d,onSlideEnd:g,onStepKeyDown:h,...C}=t,[u,x]=m.useState(null),k=q(s,j=>x(j)),c=m.useRef(void 0),b=$e(r),y=b==="ltr",v=y&&!o||!y&&o;function R(j){const S=c.current||u.getBoundingClientRect(),A=[0,S.width],T=ae(A,v?[n,l]:[l,n]);return c.current=S,T(j-S.left)}return e.jsx(Se,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:e.jsx(Ce,{dir:b,"data-orientation":"horizontal",...C,ref:k,style:{...C.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const S=R(j.clientX);i==null||i(S)},onSlideMove:j=>{const S=R(j.clientX);d==null||d(S)},onSlideEnd:()=>{c.current=void 0,g==null||g()},onStepKeyDown:j=>{const A=ye[v?"from-left":"from-right"].includes(j.key);h==null||h({event:j,direction:A?-1:1})}})})}),ba=m.forwardRef((t,s)=>{const{min:n,max:l,inverted:r,onSlideStart:o,onSlideMove:i,onSlideEnd:d,onStepKeyDown:g,...h}=t,C=m.useRef(null),u=q(s,C),x=m.useRef(void 0),k=!r;function c(b){const y=x.current||C.current.getBoundingClientRect(),v=[0,y.height],j=ae(v,k?[l,n]:[n,l]);return x.current=y,j(b-y.top)}return e.jsx(Se,{scope:t.__scopeSlider,startEdge:k?"bottom":"top",endEdge:k?"top":"bottom",size:"height",direction:k?1:-1,children:e.jsx(Ce,{"data-orientation":"vertical",...h,ref:u,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const y=c(b.clientY);o==null||o(y)},onSlideMove:b=>{const y=c(b.clientY);i==null||i(y)},onSlideEnd:()=>{x.current=void 0,d==null||d()},onStepKeyDown:b=>{const v=ye[k?"from-bottom":"from-top"].includes(b.key);g==null||g({event:b,direction:v?-1:1})}})})}),Ce=m.forwardRef((t,s)=>{const{__scopeSlider:n,onSlideStart:l,onSlideMove:r,onSlideEnd:o,onHomeKeyDown:i,onEndKeyDown:d,onStepKeyDown:g,...h}=t,C=U(O,n);return e.jsx(H.span,{...h,ref:s,onKeyDown:F(t.onKeyDown,u=>{u.key==="Home"?(i(u),u.preventDefault()):u.key==="End"?(d(u),u.preventDefault()):xe.concat(be).includes(u.key)&&(g(u),u.preventDefault())}),onPointerDown:F(t.onPointerDown,u=>{const x=u.target;x.setPointerCapture(u.pointerId),u.preventDefault(),C.thumbs.has(x)?x.focus():l(u)}),onPointerMove:F(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&r(u)}),onPointerUp:F(t.onPointerUp,u=>{const x=u.target;x.hasPointerCapture(u.pointerId)&&(x.releasePointerCapture(u.pointerId),o(u))})})}),Ne="SliderTrack",ke=m.forwardRef((t,s)=>{const{__scopeSlider:n,...l}=t,r=U(Ne,n);return e.jsx(H.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...l,ref:s})});ke.displayName=Ne;var X="SliderRange",Pe=m.forwardRef((t,s)=>{const{__scopeSlider:n,...l}=t,r=U(X,n),o=we(X,n),i=m.useRef(null),d=q(s,i),g=r.values.length,h=r.values.map(x=>De(x,r.min,r.max)),C=g>1?Math.min(...h):0,u=100-Math.max(...h);return e.jsx(H.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...l,ref:d,style:{...t.style,[o.startEdge]:C+"%",[o.endEdge]:u+"%"}})});Pe.displayName=X;var Z="SliderThumb",Me=m.forwardRef((t,s)=>{const n=ha(t.__scopeSlider),[l,r]=m.useState(null),o=q(s,d=>r(d)),i=m.useMemo(()=>l?n().findIndex(d=>d.ref.current===l):-1,[n,l]);return e.jsx(ya,{...t,ref:o,index:i})}),ya=m.forwardRef((t,s)=>{const{__scopeSlider:n,index:l,name:r,...o}=t,i=U(Z,n),d=we(Z,n),[g,h]=m.useState(null),C=q(s,R=>h(R)),u=g?i.form||!!g.closest("form"):!0,x=Te(g),k=i.values[l],c=k===void 0?0:De(k,i.min,i.max),b=Sa(l,i.values.length),y=x==null?void 0:x[d.size],v=y?Ca(y,c,d.direction):0;return m.useEffect(()=>{if(g)return i.thumbs.add(g),()=>{i.thumbs.delete(g)}},[g,i.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${c}% + ${v}px)`},children:[e.jsx(W.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(H.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":i.min,"aria-valuenow":k,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...o,ref:C,style:k===void 0?{display:"none"}:t.style,onFocus:F(t.onFocus,()=>{i.valueIndexToChangeRef.current=l})})}),u&&e.jsx(_e,{name:r??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:k},l)]})});Me.displayName=Z;var va="RadioBubbleInput",_e=m.forwardRef(({__scopeSlider:t,value:s,...n},l)=>{const r=m.useRef(null),o=q(r,l),i=Ue(s);return m.useEffect(()=>{const d=r.current;if(!d)return;const g=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(g,"value").set;if(i!==s&&C){const u=new Event("input",{bubbles:!0});C.call(d,s),d.dispatchEvent(u)}},[i,s]),e.jsx(H.input,{style:{display:"none"},...n,ref:o,defaultValue:s})});_e.displayName=va;function ja(t=[],s,n){const l=[...t];return l[n]=s,l.sort((r,o)=>r-o)}function De(t,s,n){const o=100/(n-s)*(t-s);return fe(o,[0,100])}function Sa(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function wa(t,s){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-s)),l=Math.min(...n);return n.indexOf(l)}function Ca(t,s,n){const l=t/2,o=ae([0,50],[0,l]);return(l-o(s)*n)*n}function Na(t){return t.slice(0,-1).map((s,n)=>t[n+1]-s)}function ka(t,s){if(s>0){const n=Na(t);return Math.min(...n)>=s}return!0}function ae(t,s){return n=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const l=(s[1]-s[0])/(t[1]-t[0]);return s[0]+l*(n-t[0])}}function Pa(t){return(String(t).split(".")[1]||"").length}function Ma(t,s){const n=Math.pow(10,s);return Math.round(t*n)/n}var Re=je,_a=ke,Da=Pe,Ra=Me;const ee=m.forwardRef(({className:t,...s},n)=>e.jsxs(Re,{ref:n,className:J("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(_a,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Da,{className:"absolute h-full bg-primary"})}),e.jsx(Ra,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ee.displayName=Re.displayName;const ce={sortBy:"best-match",maxPrice:2e4,minPrice:0,hasPromotions:!1,acceptsGroups:!1,establishmentType:"all",country:"",city:""},Ae={"República Dominicana":["Santo Domingo","Santo Domingo Este","Santo Domingo Oeste","Santo Domingo Norte","Santiago","La Vega","San Cristóbal","Puerto Plata","La Romana","San Pedro de Macorís","Higüey","San Francisco de Macorís","Moca","Bonao","Barahona","Azua","Bani","Mao","Nagua","Samaná","San Juan de la Maguana","Baní","Constanza","Jarabacoa","Las Terrenas","Boca Chica","Juan Dolio","Punta Cana","Bávaro","Sosúa","Cabarete","Monte Cristi"],México:["Ciudad de México","Guadalajara","Monterrey","Puebla","Tijuana","León","Juárez","Zapopan","Mérida","Cancún","Querétaro","San Luis Potosí"],Colombia:["Bogotá","Medellín","Cali","Barranquilla","Cartagena","Cúcuta","Bucaramanga","Pereira","Santa Marta","Ibagué","Manizales","Villavicencio"],Argentina:["Buenos Aires","Córdoba","Rosario","Mendoza","La Plata","San Miguel de Tucumán","Mar del Plata","Salta","Santa Fe","San Juan","Resistencia","Neuquén"],Perú:["Lima","Arequipa","Trujillo","Chiclayo","Piura","Cusco","Iquitos","Huancayo","Tacna","Ayacucho","Pucallpa","Chimbote"],Chile:["Santiago","Valparaíso","Concepción","La Serena","Antofagasta","Temuco","Rancagua","Talca","Arica","Puerto Montt","Coquimbo","Iquique"],Venezuela:["Caracas","Maracaibo","Valencia","Barquisimeto","Maracay","Ciudad Guayana","Barcelona","Maturín","Cumaná","Mérida","San Cristóbal","Cabimas"],Ecuador:["Quito","Guayaquil","Cuenca","Santo Domingo","Machala","Manta","Portoviejo","Loja","Ambato","Riobamba","Esmeraldas","Ibarra"],Guatemala:["Ciudad de Guatemala","Mixco","Villa Nueva","Quetzaltenango","Escuintla","Chinautla","Huehuetenango","Chimaltenango","Cobán","Amatitlán","Antigua Guatemala","Retalhuleu"],"Costa Rica":["San José","Alajuela","Cartago","Heredia","Puntarenas","Liberia","Limón","San Isidro","Pococí","San Carlos","Desamparados","Puriscal"],Panamá:["Ciudad de Panamá","San Miguelito","Tocumen","David","Colón","La Chorrera","Santiago","Chitré","Penonomé","La Concepción","Changuinola","Aguadulce"]},Aa=Object.keys(Ae);function La({isOpen:t,onClose:s,onApply:n,initialFilters:l}){const{t:r}=me(),[o,i]=m.useState(l||ce),[d,g]=m.useState([]);if(m.useEffect(()=>{o.country?g(Ae[o.country]||[]):g([])},[o.country]),!t)return null;const h=()=>{n(o),s()},C=()=>{i(ce)},u=[{id:"best-match",icon:ge,label:r("filters.bestMatch","Mejor coincidencia")},{id:"nearest",icon:he,label:r("filters.nearest","Más cercanos")},{id:"top-rated",icon:Qe,label:r("filters.topRated","Mejor valorado")}],x=[{id:"hasPromotions",icon:Je,label:r("filters.hasPromotions","Ofrece promociones")},{id:"acceptsGroups",icon:Ye,label:r("filters.acceptsGroups","Acepta grupos")}],k=[{id:"all",label:r("filters.allTypes","Todos")},{id:"women-only",label:r("filters.womenOnly","Solo mujeres")},{id:"men-only",label:r("filters.menOnly","Solo hombres")}];return e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative bg-card w-full max-w-lg rounded-t-3xl sm:rounded-2xl max-h-[85vh] mb-24 sm:mb-0 overflow-y-auto animate-slide-up",children:[e.jsxs("div",{className:"sticky top-0 bg-card z-10 flex items-center justify-between p-4 border-b border-border",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:r("filters.title","Filtros")}),e.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-secondary transition-colors",children:e.jsx(pe,{className:"w-5 h-5 text-muted-foreground"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:r("filters.filterBy","Filtrar por")}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:u.map(c=>{const b=c.icon,y=o.sortBy===c.id;return e.jsxs("button",{onClick:()=>i({...o,sortBy:c.id}),className:`flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${y?"border-primary bg-primary/5":"border-border hover:border-primary/30"}`,children:[e.jsx(b,{className:`w-6 h-6 ${y?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:`text-xs text-center font-medium ${y?"text-primary":"text-foreground"}`,children:c.label})]},c.id)})})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4"}),r("filters.location","Ubicación")]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:r("filters.country","País")}),e.jsxs(te,{value:o.country,onValueChange:c=>{i({...o,country:c,city:""})},children:[e.jsx(re,{className:"h-10 bg-background border-input",children:e.jsx(se,{placeholder:r("filters.selectCountry","Seleccionar país")})}),e.jsx(oe,{className:"max-h-[300px] overflow-y-auto bg-popover z-[70]",position:"popper",sideOffset:4,children:Aa.map(c=>e.jsx(ne,{value:c,className:"cursor-pointer",children:c},c))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:r("filters.city","Ciudad")}),e.jsxs(te,{value:o.city,onValueChange:c=>i({...o,city:c}),disabled:!o.country||d.length===0,children:[e.jsx(re,{className:"h-10 bg-background border-input disabled:opacity-50",children:e.jsx(se,{placeholder:o.country?r("filters.selectCity","Seleccionar ciudad"):r("filters.selectCountryFirst","Primero selecciona un país")})}),e.jsx(oe,{className:"max-h-[250px] overflow-y-auto bg-popover z-[70]",position:"popper",sideOffset:4,children:d.map(c=>e.jsx(ne,{value:c,className:"cursor-pointer",children:c},c))})]})]})]})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-4",children:r("filters.priceRange","Rango de precio")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:r("filters.minPrice","Precio mín.")}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:["DOP ",o.minPrice.toLocaleString()]})]}),e.jsx(ee,{value:[o.minPrice],onValueChange:([c])=>i({...o,minPrice:c}),max:o.maxPrice,min:0,step:100,className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:r("filters.maxPrice","Precio máx.")}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:["DOP ",o.maxPrice.toLocaleString(),"+"]})]}),e.jsx(ee,{value:[o.maxPrice],onValueChange:([c])=>i({...o,maxPrice:c}),max:2e4,min:o.minPrice,step:500,className:"w-full"})]})]})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:r("filters.bookingOptions","Opciones de reserva")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(c=>{const b=c.icon,y=o[c.id];return e.jsxs("button",{onClick:()=>i({...o,[c.id]:!o[c.id]}),className:`flex items-center gap-2 px-4 py-2.5 rounded-full border transition-all ${y?"border-primary bg-primary/5 text-primary":"border-border text-foreground hover:border-primary/30"}`,children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:c.label})]},c.id)})})]}),e.jsx("div",{className:"h-px bg-border"}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-semibold text-foreground mb-3",children:r("filters.establishmentType","Tipo de establecimiento")}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(c=>{const b=o.establishmentType===c.id;return e.jsx("button",{onClick:()=>i({...o,establishmentType:c.id}),className:`px-4 py-2.5 rounded-full border transition-all ${b?"border-primary bg-primary text-primary-foreground":"border-border text-foreground hover:border-primary/30"}`,children:e.jsx("span",{className:"text-sm font-medium",children:c.label})},c.id)})})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-card border-t border-border p-4 flex items-center gap-4",children:[e.jsx("button",{onClick:C,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:r("filters.clearAll","Eliminar todos")}),e.jsx(Ie,{onClick:h,className:"flex-1 h-12 rounded-full bg-foreground text-background hover:bg-foreground/90",children:r("filters.apply","Aplicar")})]})]})]})}const Ea=[{id:"all",label:"all",count:34},{id:"hair-salon",label:"hair-salon",count:2},{id:"nails",label:"nails",count:2},{id:"eyebrows-lashes",label:"eyebrows-lashes",count:2},{id:"beauty-salon",label:"beauty-salon",count:2},{id:"medspa",label:"medspa",count:2},{id:"barber",label:"barber",count:2},{id:"massage",label:"massage",count:2},{id:"spa-sauna",label:"spa-sauna",count:2},{id:"waxing",label:"waxing",count:2},{id:"tattoo-piercing",label:"tattoo-piercing",count:2},{id:"tanning",label:"tanning",count:2},{id:"fitness-recovery",label:"fitness-recovery",count:2},{id:"physical-therapy",label:"physical-therapy",count:2},{id:"health-practice",label:"health-practice",count:2},{id:"pet-grooming",label:"pet-grooming",count:2},{id:"restaurant",label:"restaurant",count:2},{id:"other",label:"other",count:2}],de={all:Y,"hair-salon":ta,nails:le,"eyebrows-lashes":aa,"beauty-salon":ge,medspa:ma,barber:ea,massage:le,"spa-sauna":sa,waxing:ia,"tattoo-piercing":ca,tanning:Ke,"fitness-recovery":oa,"physical-therapy":ra,"health-practice":ua,"pet-grooming":la,other:na},V=t=>{if(!t)return"other";const s=t.toLowerCase().replace(/_/g,"-").trim();return{salon:"hair-salon","hair-salon":"hair-salon",hair_salon:"hair-salon",peluqueria:"hair-salon",peluquería:"hair-salon",peluquerias:"hair-salon",peluquerías:"hair-salon",barberia:"barber",barbería:"barber",barber:"barber",barberias:"barber",barberías:"barber",nails:"nails",uñas:"nails",unas:"nails",nail:"nails","nail-art":"nails",nail_art:"nails",manicure:"nails",pedicure:"nails",spa:"spa-sauna","spa-sauna":"spa-sauna",spa_sauna:"spa-sauna",sauna:"spa-sauna",beauty:"beauty-salon","beauty-salon":"beauty-salon",beauty_salon:"beauty-salon",maquillaje:"beauty-salon",makeup:"beauty-salon",faciales:"beauty-salon",facial:"beauty-salon","facial-treatment":"beauty-salon","tratamiento-facial":"beauty-salon",massage:"massage",masaje:"massage",masajes:"massage",medspa:"medspa","med-spa":"medspa","medicina-estetica":"medspa","medicina-estética":"medspa","eyebrows-lashes":"eyebrows-lashes",eyebrows_lashes:"eyebrows-lashes",cejas:"eyebrows-lashes",pestañas:"eyebrows-lashes",pestanas:"eyebrows-lashes",microblading:"eyebrows-lashes",waxing:"waxing",depilacion:"waxing",depilación:"waxing",cera:"waxing","tattoo-piercing":"tattoo-piercing",tattoo_piercing:"tattoo-piercing",tattoo:"tattoo-piercing",tatuaje:"tattoo-piercing",tatuajes:"tattoo-piercing",piercing:"tattoo-piercing",piercings:"tattoo-piercing",tanning:"tanning",bronceado:"tanning",autobronceado:"tanning","fitness-recovery":"fitness-recovery",fitness_recovery:"fitness-recovery",fitness:"fitness-recovery",recovery:"fitness-recovery",recuperacion:"fitness-recovery",recuperación:"fitness-recovery","physical-therapy":"physical-therapy",physical_therapy:"physical-therapy",fisioterapia:"physical-therapy",fisio:"physical-therapy","terapia-fisica":"physical-therapy","terapia-física":"physical-therapy","health-practice":"health-practice",health_practice:"health-practice",salud:"health-practice","medicina-alternativa":"health-practice",naturopatia:"health-practice",naturopatía:"health-practice","pet-grooming":"pet-grooming",pet_grooming:"pet-grooming",grooming:"pet-grooming","peluqueria-canina":"pet-grooming","peluquería-canina":"pet-grooming",mascotas:"pet-grooming"}[s]||s},it=()=>{const[t,s]=m.useState(""),[n,l]=m.useState(null),[r,o]=m.useState(!1),[i,d]=m.useState({sortBy:"best-match",maxPrice:2e4,minPrice:0,hasPromotions:!1,acceptsGroups:!1,establishmentType:"all",country:"",city:""}),g=ue(),{t:h}=me(),{user:C,isGuest:u}=Ve(),{data:x=[],isLoading:k,error:c}=Xe(),{isFavorite:b,toggleFavorite:y}=Ge(),v=Ze(y,500),R=m.useCallback(a=>{const p=[];return a.category&&p.push(V(a.category)),a.primary_category&&p.push(V(a.primary_category)),a.secondary_categories&&Array.isArray(a.secondary_categories)&&a.secondary_categories.forEach(f=>{f&&p.push(V(f))}),[...new Set(p)]},[]),j=m.useMemo(()=>x.map(a=>({id:a.id,name:a.name,description:a.description||"",rating:Number(a.rating)||0,reviewCount:a.review_count||0,distance:"N/A",category:V(a.category||a.primary_category),imageUrl:a.main_image||"",images:a.main_image?[a.main_image]:[],coverImageUrl:a.cover_image_url||void 0,coverImages:a.cover_image_url?[a.cover_image_url]:[],logoUrl:a.logo_url||void 0,isFavorite:b(a.id),closingTime:"8:00 PM",address:a.address||void 0,allCategories:R(a)})),[x,b,R]),S=m.useCallback(a=>{const p=a.toLowerCase().trim(),f=[p];return(p.includes("peluquería")||p.includes("peluqueria"))&&f.push("barbería","barberia","barber"),(p.includes("barbería")||p.includes("barberia")||p.includes("barber"))&&f.push("peluquería","peluqueria"),f},[]),A=m.useCallback((a,p)=>{const f=a.toLowerCase();return p.some(M=>{const w=M.toLowerCase();return(f==="hair-salon"||f==="barber")&&(w.includes("peluquería")||w.includes("peluqueria")||w.includes("barbería")||w.includes("barberia")||w.includes("barber"))?!0:f.includes(w)||w.includes(f)})},[]),B=m.useCallback(a=>{if(!a)return[];const p=[a];return a==="hair-salon"&&p.push("barber"),a==="barber"&&p.push("hair-salon"),p},[]),T=m.useCallback((a,p)=>{if(!p)return!0;const f=p.toLowerCase().trim(),M=S(f),w=h(`categories.${a}`).toLowerCase(),N=a.toLowerCase(),E=V(f);return M.some(G=>{const z=G.toLowerCase();return w.includes(z)||z.includes(w)||N.includes(z)||z.includes(N)||E===a||V(z)===a})},[S,h]),K=m.useMemo(()=>{const a={};j.forEach(f=>{(f.allCategories||[f.category||"other"]).forEach(w=>{const N=w||"other";a[N]=(a[N]||0)+1})});let p=Ea.filter(f=>f.id!=="all").map(f=>({...f,count:a[f.id]||0}));return t&&(p=p.filter(f=>T(f.id,t))),p.concat([{id:"all",label:"all",count:j.length}])},[j,t,T]),I=m.useMemo(()=>j.filter(a=>{if(!t&&!n&&!i.country&&!i.city)return!0;const p=a.allCategories||[a.category||"other"];let f=!0;if(t){const N=S(t),E=a.name.toLowerCase(),G=a.description.toLowerCase(),z=N.some($=>E.includes($.toLowerCase())||G.includes($.toLowerCase())),Le=p.some($=>A($,N));f=z||Le}const M=n?B(n).some(N=>p.includes(N)):!0;let w=!0;if(i.city){const N=(a.address||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),E=i.city.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");w=N.includes(E)}return f&&M&&w}),[j,t,n,S,A,B,i.country,i.city]),L=m.useCallback(async a=>{if(!C&&!u){Q({title:h("common.error"),description:"Debes iniciar sesión para guardar favoritos",variant:"destructive"});return}if(u){Q({title:h("common.error"),description:"Los invitados no pueden guardar favoritos. Crea una cuenta.",variant:"destructive"});return}const{error:p}=await v(a);p&&Q({title:h("common.error"),description:"No se pudo actualizar favoritos",variant:"destructive"})},[C,u,v,h]);m.useEffect(()=>()=>{},[]);const P=a=>{l(a==="all"||a===n?null:a)},D=t||n;return K.find(a=>a.id===n),k?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(Fe,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"px-4 py-4 max-w-lg mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h1",{className:"text-xl font-bold text-foreground",children:h("search.title")})}),e.jsx(pa,{value:t,onChange:s,placeholder:h("search.placeholder"),onMapClick:()=>g("/map"),onFilterClick:()=>o(!0)})]})}),e.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-6",children:[e.jsxs("section",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-3",children:h("search.categories")}),n?e.jsx("button",{onClick:()=>l(null),className:"flex items-center gap-3 p-4 rounded-xl border bg-primary text-primary-foreground border-primary shadow-card w-full",children:(()=>{const a=de[n]||Y;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gray-100",children:e.jsx(a,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("span",{className:"font-medium text-sm text-primary-foreground",children:h(`categories.${n}`)}),e.jsxs("p",{className:"text-xs text-primary-foreground/70",children:[I.length," ",h("common.results")]})]}),e.jsx(pe,{className:"w-5 h-5 text-primary-foreground"})]})})()}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:K.filter(a=>a.id!=="all").map(a=>{const p=de[a.id]||Y;return e.jsxs("button",{onClick:()=>P(a.id),className:J("flex items-center gap-3 p-4 rounded-xl border transition-all duration-200",a.count>0?"bg-card border-border hover:border-primary/30":"bg-card/50 border-border/50 opacity-60"),children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center bg-gray-100",children:e.jsx(p,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-medium text-sm text-foreground",children:h(`categories.${a.id}`)}),e.jsxs("p",{className:J("text-xs",a.count>0?"text-muted-foreground":"text-muted-foreground/60"),children:[a.count," ",h("common.results")]})]})]},a.id)})})]}),D&&e.jsxs("section",{className:"space-y-4 animate-fade-in px-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[I.length," ",h("common.results"),t&&` ${h("search.resultsFor")} "${t}"`]})}),I.map((a,p)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${p*.05}s`},children:e.jsx(ie,{business:a,onToggleFavorite:L})},a.id)),I.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:h("common.noResults")})})]}),!D&&e.jsxs("section",{className:"space-y-4 animate-fade-in px-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.length," ",h("common.results")]})}),j.map((a,p)=>e.jsx("div",{className:"animate-slide-up",style:{animationDelay:`${p*.05}s`},children:e.jsx(ie,{business:a,onToggleFavorite:L})},a.id))]})]}),e.jsx(La,{isOpen:r,onClose:()=>o(!1),onApply:a=>d(a),initialFilters:i}),!r&&e.jsx(Oe,{})]})};export{it as default};
