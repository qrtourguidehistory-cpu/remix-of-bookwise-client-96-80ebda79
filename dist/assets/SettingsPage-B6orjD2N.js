const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-D7fy8jnA.js","./index-BMtVW8Qo.js","./index-BsoTprCV.css"])))=>i.map(i=>d[i]);
import{v as fe,r,ak as le,_ as ce,j as e,y as kt,z as ze,p as He,R as Dt,e as At,t as Ve,s as Mt,d as z,i as Y,P as V,al as Lt,A as Ot,g as _,E as Bt,am as Ge,h as Vt,F as Ft,H as Ht,G as Wt,I as Ut,J as Kt,K as $t,L as zt,c as Z,u as Gt,an as Yt,b as Zt,a as qt,B as te,C as Xt,D as Ne,k as je,l as Te,m as Ie,ao as Pe,ap as Ee,Q as B,x as Jt}from"./index-BMtVW8Qo.js";import{C as Qt,S as We}from"./switch-B1fKJL8k.js";import{u as eo}from"./useTimeFormat-CWhPmOl9.js";import{c as Ue}from"./index-BdQq_4o_.js";import{u as to}from"./index-BCkGm2po.js";import{u as oo}from"./index-CfZ-_nxE.js";import{C as Ye}from"./chevron-down-DvA0D8Zf.js";import{C as ro}from"./check-DNevATt4.js";import{I as _e}from"./input-BOwwg8xQ.js";import{L as Re}from"./label-B-ga4gVN.js";import{A as so}from"./arrow-left-QbD5Z0yg.js";import{S as no}from"./sun-BYKkUtJa.js";import{G as ao}from"./globe-CLgBElP3.js";import{L as io}from"./log-out-P1heMIFI.js";import{T as lo}from"./trash-2-DdKmZiQY.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=fe("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=fe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),fo=()=>{const[s,n]=r.useState(!1),[o,a]=r.useState("none"),[t,d]=r.useState(!0);r.useEffect(()=>{c()},[]);const c=async()=>{if(!le.isNativePlatform())return d(!1),{isAvailable:!1,biometryType:"none"};try{const{NativeBiometric:f}=await ce(async()=>{const{NativeBiometric:b}=await import("./index-D7fy8jnA.js").then(S=>S.i);return{NativeBiometric:b}},__vite__mapDeps([0,1,2]),import.meta.url),w=await f.isAvailable();return n(w.isAvailable),a(String(w.biometryType)),d(!1),{isAvailable:w.isAvailable,biometryType:String(w.biometryType)}}catch(f){return console.error("Biometric check failed:",f),d(!1),{isAvailable:!1,biometryType:"none"}}},l=r.useCallback(async f=>{if(!le.isNativePlatform())return console.log("Biometric auth not available in browser"),!1;try{const{NativeBiometric:w}=await ce(async()=>{const{NativeBiometric:b}=await import("./index-D7fy8jnA.js").then(S=>S.i);return{NativeBiometric:b}},__vite__mapDeps([0,1,2]),import.meta.url);return await w.verifyIdentity({reason:f||"AutenticaciÃ³n para continuar",title:"Bookwise",subtitle:"AutenticaciÃ³n biomÃ©trica",description:"Coloca tu dedo en el sensor o mira tu dispositivo"}),!0}catch(w){return console.error("Biometric authentication failed:",w),!1}},[]),i=r.useCallback(async(f,w)=>{if(!le.isNativePlatform())return!1;try{const{NativeBiometric:b}=await ce(async()=>{const{NativeBiometric:S}=await import("./index-D7fy8jnA.js").then(p=>p.i);return{NativeBiometric:S}},__vite__mapDeps([0,1,2]),import.meta.url);return await b.setCredentials({username:f,password:w,server:"bookwise.app"}),!0}catch(b){return console.error("Failed to set credentials:",b),!1}},[]),u=r.useCallback(async()=>{if(!le.isNativePlatform())return null;try{const{NativeBiometric:f}=await ce(async()=>{const{NativeBiometric:b}=await import("./index-D7fy8jnA.js").then(S=>S.i);return{NativeBiometric:b}},__vite__mapDeps([0,1,2]),import.meta.url),w=await f.getCredentials({server:"bookwise.app"});return{username:w.username,password:w.password}}catch(f){return console.error("Failed to get credentials:",f),null}},[]),v=r.useCallback(async()=>{if(!le.isNativePlatform())return!1;try{const{NativeBiometric:f}=await ce(async()=>{const{NativeBiometric:w}=await import("./index-D7fy8jnA.js").then(b=>b.i);return{NativeBiometric:w}},__vite__mapDeps([0,1,2]),import.meta.url);return await f.deleteCredentials({server:"bookwise.app"}),!0}catch(f){return console.error("Failed to delete credentials:",f),!1}},[]);return{isAvailable:s,biometryType:o,isLoading:t,authenticate:l,setCredentials:i,getCredentials:u,deleteCredentials:v,checkBiometricAvailability:c}};function ho(s){const n=go(s),o=r.forwardRef((a,t)=>{const{children:d,...c}=a,l=r.Children.toArray(d),i=l.find(vo);if(i){const u=i.props.children,v=l.map(f=>f===i?r.Children.count(u)>1?r.Children.only(null):r.isValidElement(u)?u.props.children:null:f);return e.jsx(n,{...c,ref:t,children:r.isValidElement(u)?r.cloneElement(u,void 0,v):null})}return e.jsx(n,{...c,ref:t,children:d})});return o.displayName=`${s}.Slot`,o}function go(s){const n=r.forwardRef((o,a)=>{const{children:t,...d}=o;if(r.isValidElement(t)){const c=yo(t),l=wo(d,t.props);return t.type!==r.Fragment&&(l.ref=a?kt(a,c):c),r.cloneElement(t,l)}return r.Children.count(t)>1?r.Children.only(null):null});return n.displayName=`${s}.SlotClone`,n}var xo=Symbol("radix.slottable");function vo(s){return r.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===xo}function wo(s,n){const o={...n};for(const a in n){const t=s[a],d=n[a];/^on[A-Z]/.test(a)?t&&d?o[a]=(...l)=>{const i=d(...l);return t(...l),i}:t&&(o[a]=t):a==="style"?o[a]={...t,...d}:a==="className"&&(o[a]=[t,d].filter(Boolean).join(" "))}return{...s,...o}}function yo(s){var a,t;let n=(a=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:a.get,o=n&&"isReactWarning"in n&&n.isReactWarning;return o?s.ref:(n=(t=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:t.get,o=n&&"isReactWarning"in n&&n.isReactWarning,o?s.props.ref:s.props.ref||s.ref)}var bo=[" ","Enter","ArrowUp","ArrowDown"],So=[" ","Enter"],oe="Select",[he,ge,Co]=Mt(oe),[ae]=At(oe,[Co,ze]),xe=ze(),[No,q]=ae(oe),[jo,To]=ae(oe),Ze=s=>{const{__scopeSelect:n,children:o,open:a,defaultOpen:t,onOpenChange:d,value:c,defaultValue:l,onValueChange:i,dir:u,name:v,autoComplete:f,disabled:w,required:b,form:S}=s,p=xe(n),[y,C]=r.useState(null),[m,h]=r.useState(null),[A,R]=r.useState(!1),J=to(u),[E,P]=He({prop:a,defaultProp:t??!1,onChange:d,caller:oe}),[M,G]=He({prop:c,defaultProp:l,onChange:i,caller:oe}),F=r.useRef(null),H=y?S||!!y.closest("form"):!0,[$,W]=r.useState(new Set),U=Array.from($).map(k=>k.props.value).join(";");return e.jsx(Dt,{...p,children:e.jsxs(No,{required:b,scope:n,trigger:y,onTriggerChange:C,valueNode:m,onValueNodeChange:h,valueNodeHasChildren:A,onValueNodeHasChildrenChange:R,contentId:Ve(),value:M,onValueChange:G,open:E,onOpenChange:P,dir:J,triggerPointerDownPosRef:F,disabled:w,children:[e.jsx(he.Provider,{scope:n,children:e.jsx(jo,{scope:s.__scopeSelect,onNativeOptionAdd:r.useCallback(k=>{W(x=>new Set(x).add(k))},[]),onNativeOptionRemove:r.useCallback(k=>{W(x=>{const D=new Set(x);return D.delete(k),D})},[]),children:o})}),H?e.jsxs(wt,{"aria-hidden":!0,required:b,tabIndex:-1,name:v,autoComplete:f,value:M,onChange:k=>G(k.target.value),disabled:w,form:S,children:[M===void 0?e.jsx("option",{value:""}):null,Array.from($)]},U):null]})})};Ze.displayName=oe;var qe="SelectTrigger",Xe=r.forwardRef((s,n)=>{const{__scopeSelect:o,disabled:a=!1,...t}=s,d=xe(o),c=q(qe,o),l=c.disabled||a,i=z(n,c.onTriggerChange),u=ge(o),v=r.useRef("touch"),[f,w,b]=bt(p=>{const y=u().filter(h=>!h.disabled),C=y.find(h=>h.value===c.value),m=St(y,p,C);m!==void 0&&c.onValueChange(m.value)}),S=p=>{l||(c.onOpenChange(!0),b()),p&&(c.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return e.jsx(Ot,{asChild:!0,...d,children:e.jsx(V.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":yt(c.value)?"":void 0,...t,ref:i,onClick:_(t.onClick,p=>{p.currentTarget.focus(),v.current!=="mouse"&&S(p)}),onPointerDown:_(t.onPointerDown,p=>{v.current=p.pointerType;const y=p.target;y.hasPointerCapture(p.pointerId)&&y.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(S(p),p.preventDefault())}),onKeyDown:_(t.onKeyDown,p=>{const y=f.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&w(p.key),!(y&&p.key===" ")&&bo.includes(p.key)&&(S(),p.preventDefault())})})})});Xe.displayName=qe;var Je="SelectValue",Qe=r.forwardRef((s,n)=>{const{__scopeSelect:o,className:a,style:t,children:d,placeholder:c="",...l}=s,i=q(Je,o),{onValueNodeHasChildrenChange:u}=i,v=d!==void 0,f=z(n,i.onValueNodeChange);return Y(()=>{u(v)},[u,v]),e.jsx(V.span,{...l,ref:f,style:{pointerEvents:"none"},children:yt(i.value)?e.jsx(e.Fragment,{children:c}):d})});Qe.displayName=Je;var Io="SelectIcon",et=r.forwardRef((s,n)=>{const{__scopeSelect:o,children:a,...t}=s;return e.jsx(V.span,{"aria-hidden":!0,...t,ref:n,children:a||"â–¼"})});et.displayName=Io;var Po="SelectPortal",tt=s=>e.jsx(Bt,{asChild:!0,...s});tt.displayName=Po;var re="SelectContent",ot=r.forwardRef((s,n)=>{const o=q(re,s.__scopeSelect),[a,t]=r.useState();if(Y(()=>{t(new DocumentFragment)},[]),!o.open){const d=a;return d?Ge.createPortal(e.jsx(rt,{scope:s.__scopeSelect,children:e.jsx(he.Slot,{scope:s.__scopeSelect,children:e.jsx("div",{children:s.children})})}),d):null}return e.jsx(st,{...s,ref:n})});ot.displayName=re;var K=10,[rt,X]=ae(re),Eo="SelectContentImpl",_o=ho("SelectContent.RemoveScroll"),st=r.forwardRef((s,n)=>{const{__scopeSelect:o,position:a="item-aligned",onCloseAutoFocus:t,onEscapeKeyDown:d,onPointerDownOutside:c,side:l,sideOffset:i,align:u,alignOffset:v,arrowPadding:f,collisionBoundary:w,collisionPadding:b,sticky:S,hideWhenDetached:p,avoidCollisions:y,...C}=s,m=q(re,o),[h,A]=r.useState(null),[R,J]=r.useState(null),E=z(n,g=>A(g)),[P,M]=r.useState(null),[G,F]=r.useState(null),H=ge(o),[$,W]=r.useState(!1),U=r.useRef(!1);r.useEffect(()=>{if(h)return Ft(h)},[h]),Ht();const k=r.useCallback(g=>{const[I,...O]=H().map(j=>j.ref.current),[T]=O.slice(-1),N=document.activeElement;for(const j of g)if(j===N||(j==null||j.scrollIntoView({block:"nearest"}),j===I&&R&&(R.scrollTop=0),j===T&&R&&(R.scrollTop=R.scrollHeight),j==null||j.focus(),document.activeElement!==N))return},[H,R]),x=r.useCallback(()=>k([P,h]),[k,P,h]);r.useEffect(()=>{$&&x()},[$,x]);const{onOpenChange:D,triggerPointerDownPosRef:L}=m;r.useEffect(()=>{if(h){let g={x:0,y:0};const I=T=>{var N,j;g={x:Math.abs(Math.round(T.pageX)-(((N=L.current)==null?void 0:N.x)??0)),y:Math.abs(Math.round(T.pageY)-(((j=L.current)==null?void 0:j.y)??0))}},O=T=>{g.x<=10&&g.y<=10?T.preventDefault():h.contains(T.target)||D(!1),document.removeEventListener("pointermove",I),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",I),document.addEventListener("pointerup",O,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",O,{capture:!0})}}},[h,D,L]),r.useEffect(()=>{const g=()=>D(!1);return window.addEventListener("blur",g),window.addEventListener("resize",g),()=>{window.removeEventListener("blur",g),window.removeEventListener("resize",g)}},[D]);const[ve,ue]=bt(g=>{const I=H().filter(N=>!N.disabled),O=I.find(N=>N.ref.current===document.activeElement),T=St(I,g,O);T&&setTimeout(()=>T.ref.current.focus())}),we=r.useCallback((g,I,O)=>{const T=!U.current&&!O;(m.value!==void 0&&m.value===I||T)&&(M(g),T&&(U.current=!0))},[m.value]),ye=r.useCallback(()=>h==null?void 0:h.focus(),[h]),se=r.useCallback((g,I,O)=>{const T=!U.current&&!O;(m.value!==void 0&&m.value===I||T)&&F(g)},[m.value]),pe=a==="popper"?ke:nt,ie=pe===ke?{side:l,sideOffset:i,align:u,alignOffset:v,arrowPadding:f,collisionBoundary:w,collisionPadding:b,sticky:S,hideWhenDetached:p,avoidCollisions:y}:{};return e.jsx(rt,{scope:o,content:h,viewport:R,onViewportChange:J,itemRefCallback:we,selectedItem:P,onItemLeave:ye,itemTextRefCallback:se,focusSelectedItem:x,selectedItemText:G,position:a,isPositioned:$,searchRef:ve,children:e.jsx(Wt,{as:_o,allowPinchZoom:!0,children:e.jsx(Ut,{asChild:!0,trapped:m.open,onMountAutoFocus:g=>{g.preventDefault()},onUnmountAutoFocus:_(t,g=>{var I;(I=m.trigger)==null||I.focus({preventScroll:!0}),g.preventDefault()}),children:e.jsx(Kt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:c,onFocusOutside:g=>g.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(pe,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:g=>g.preventDefault(),...C,...ie,onPlaced:()=>W(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:_(C.onKeyDown,g=>{const I=g.ctrlKey||g.altKey||g.metaKey;if(g.key==="Tab"&&g.preventDefault(),!I&&g.key.length===1&&ue(g.key),["ArrowUp","ArrowDown","Home","End"].includes(g.key)){let T=H().filter(N=>!N.disabled).map(N=>N.ref.current);if(["ArrowUp","End"].includes(g.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(g.key)){const N=g.target,j=T.indexOf(N);T=T.slice(j+1)}setTimeout(()=>k(T)),g.preventDefault()}})})})})})})});st.displayName=Eo;var Ro="SelectItemAlignedPosition",nt=r.forwardRef((s,n)=>{const{__scopeSelect:o,onPlaced:a,...t}=s,d=q(re,o),c=X(re,o),[l,i]=r.useState(null),[u,v]=r.useState(null),f=z(n,E=>v(E)),w=ge(o),b=r.useRef(!1),S=r.useRef(!0),{viewport:p,selectedItem:y,selectedItemText:C,focusSelectedItem:m}=c,h=r.useCallback(()=>{if(d.trigger&&d.valueNode&&l&&u&&p&&y&&C){const E=d.trigger.getBoundingClientRect(),P=u.getBoundingClientRect(),M=d.valueNode.getBoundingClientRect(),G=C.getBoundingClientRect();if(d.dir!=="rtl"){const N=G.left-P.left,j=M.left-N,Q=E.left-j,ee=E.width+Q,be=Math.max(ee,P.width),Se=window.innerWidth-K,Ce=Ue(j,[K,Math.max(K,Se-be)]);l.style.minWidth=ee+"px",l.style.left=Ce+"px"}else{const N=P.right-G.right,j=window.innerWidth-M.right-N,Q=window.innerWidth-E.right-j,ee=E.width+Q,be=Math.max(ee,P.width),Se=window.innerWidth-K,Ce=Ue(j,[K,Math.max(K,Se-be)]);l.style.minWidth=ee+"px",l.style.right=Ce+"px"}const F=w(),H=window.innerHeight-K*2,$=p.scrollHeight,W=window.getComputedStyle(u),U=parseInt(W.borderTopWidth,10),k=parseInt(W.paddingTop,10),x=parseInt(W.borderBottomWidth,10),D=parseInt(W.paddingBottom,10),L=U+k+$+D+x,ve=Math.min(y.offsetHeight*5,L),ue=window.getComputedStyle(p),we=parseInt(ue.paddingTop,10),ye=parseInt(ue.paddingBottom,10),se=E.top+E.height/2-K,pe=H-se,ie=y.offsetHeight/2,g=y.offsetTop+ie,I=U+k+g,O=L-I;if(I<=se){const N=F.length>0&&y===F[F.length-1].ref.current;l.style.bottom="0px";const j=u.clientHeight-p.offsetTop-p.offsetHeight,Q=Math.max(pe,ie+(N?ye:0)+j+x),ee=I+Q;l.style.height=ee+"px"}else{const N=F.length>0&&y===F[0].ref.current;l.style.top="0px";const Q=Math.max(se,U+p.offsetTop+(N?we:0)+ie)+O;l.style.height=Q+"px",p.scrollTop=I-se+p.offsetTop}l.style.margin=`${K}px 0`,l.style.minHeight=ve+"px",l.style.maxHeight=H+"px",a==null||a(),requestAnimationFrame(()=>b.current=!0)}},[w,d.trigger,d.valueNode,l,u,p,y,C,d.dir,a]);Y(()=>h(),[h]);const[A,R]=r.useState();Y(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const J=r.useCallback(E=>{E&&S.current===!0&&(h(),m==null||m(),S.current=!1)},[h,m]);return e.jsx(Do,{scope:o,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:J,children:e.jsx("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:e.jsx(V.div,{...t,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...t.style}})})})});nt.displayName=Ro;var ko="SelectPopperPosition",ke=r.forwardRef((s,n)=>{const{__scopeSelect:o,align:a="start",collisionPadding:t=K,...d}=s,c=xe(o);return e.jsx($t,{...c,...d,ref:n,align:a,collisionPadding:t,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ke.displayName=ko;var[Do,Fe]=ae(re,{}),De="SelectViewport",at=r.forwardRef((s,n)=>{const{__scopeSelect:o,nonce:a,...t}=s,d=X(De,o),c=Fe(De,o),l=z(n,d.onViewportChange),i=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(he.Slot,{scope:o,children:e.jsx(V.div,{"data-radix-select-viewport":"",role:"presentation",...t,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...t.style},onScroll:_(t.onScroll,u=>{const v=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:w}=c;if(w!=null&&w.current&&f){const b=Math.abs(i.current-v.scrollTop);if(b>0){const S=window.innerHeight-K*2,p=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),C=Math.max(p,y);if(C<S){const m=C+b,h=Math.min(S,m),A=m-h;f.style.height=h+"px",f.style.bottom==="0px"&&(v.scrollTop=A>0?A:0,f.style.justifyContent="flex-end")}}}i.current=v.scrollTop})})})]})});at.displayName=De;var it="SelectGroup",[Ao,Mo]=ae(it),Lo=r.forwardRef((s,n)=>{const{__scopeSelect:o,...a}=s,t=Ve();return e.jsx(Ao,{scope:o,id:t,children:e.jsx(V.div,{role:"group","aria-labelledby":t,...a,ref:n})})});Lo.displayName=it;var lt="SelectLabel",ct=r.forwardRef((s,n)=>{const{__scopeSelect:o,...a}=s,t=Mo(lt,o);return e.jsx(V.div,{id:t.id,...a,ref:n})});ct.displayName=lt;var me="SelectItem",[Oo,dt]=ae(me),ut=r.forwardRef((s,n)=>{const{__scopeSelect:o,value:a,disabled:t=!1,textValue:d,...c}=s,l=q(me,o),i=X(me,o),u=l.value===a,[v,f]=r.useState(d??""),[w,b]=r.useState(!1),S=z(n,m=>{var h;return(h=i.itemRefCallback)==null?void 0:h.call(i,m,a,t)}),p=Ve(),y=r.useRef("touch"),C=()=>{t||(l.onValueChange(a),l.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Oo,{scope:o,value:a,disabled:t,textId:p,isSelected:u,onItemTextChange:r.useCallback(m=>{f(h=>h||((m==null?void 0:m.textContent)??"").trim())},[]),children:e.jsx(he.ItemSlot,{scope:o,value:a,disabled:t,textValue:v,children:e.jsx(V.div,{role:"option","aria-labelledby":p,"data-highlighted":w?"":void 0,"aria-selected":u&&w,"data-state":u?"checked":"unchecked","aria-disabled":t||void 0,"data-disabled":t?"":void 0,tabIndex:t?void 0:-1,...c,ref:S,onFocus:_(c.onFocus,()=>b(!0)),onBlur:_(c.onBlur,()=>b(!1)),onClick:_(c.onClick,()=>{y.current!=="mouse"&&C()}),onPointerUp:_(c.onPointerUp,()=>{y.current==="mouse"&&C()}),onPointerDown:_(c.onPointerDown,m=>{y.current=m.pointerType}),onPointerMove:_(c.onPointerMove,m=>{var h;y.current=m.pointerType,t?(h=i.onItemLeave)==null||h.call(i):y.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_(c.onPointerLeave,m=>{var h;m.currentTarget===document.activeElement&&((h=i.onItemLeave)==null||h.call(i))}),onKeyDown:_(c.onKeyDown,m=>{var A;((A=i.searchRef)==null?void 0:A.current)!==""&&m.key===" "||(So.includes(m.key)&&C(),m.key===" "&&m.preventDefault())})})})})});ut.displayName=me;var de="SelectItemText",pt=r.forwardRef((s,n)=>{const{__scopeSelect:o,className:a,style:t,...d}=s,c=q(de,o),l=X(de,o),i=dt(de,o),u=To(de,o),[v,f]=r.useState(null),w=z(n,C=>f(C),i.onItemTextChange,C=>{var m;return(m=l.itemTextRefCallback)==null?void 0:m.call(l,C,i.value,i.disabled)}),b=v==null?void 0:v.textContent,S=r.useMemo(()=>e.jsx("option",{value:i.value,disabled:i.disabled,children:b},i.value),[i.disabled,i.value,b]),{onNativeOptionAdd:p,onNativeOptionRemove:y}=u;return Y(()=>(p(S),()=>y(S)),[p,y,S]),e.jsxs(e.Fragment,{children:[e.jsx(V.span,{id:i.textId,...d,ref:w}),i.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Ge.createPortal(d.children,c.valueNode):null]})});pt.displayName=de;var mt="SelectItemIndicator",ft=r.forwardRef((s,n)=>{const{__scopeSelect:o,...a}=s;return dt(mt,o).isSelected?e.jsx(V.span,{"aria-hidden":!0,...a,ref:n}):null});ft.displayName=mt;var Ae="SelectScrollUpButton",ht=r.forwardRef((s,n)=>{const o=X(Ae,s.__scopeSelect),a=Fe(Ae,s.__scopeSelect),[t,d]=r.useState(!1),c=z(n,a.onScrollButtonChange);return Y(()=>{if(o.viewport&&o.isPositioned){let l=function(){const u=i.scrollTop>0;d(u)};const i=o.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[o.viewport,o.isPositioned]),t?e.jsx(xt,{...s,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:i}=o;l&&i&&(l.scrollTop=l.scrollTop-i.offsetHeight)}}):null});ht.displayName=Ae;var Me="SelectScrollDownButton",gt=r.forwardRef((s,n)=>{const o=X(Me,s.__scopeSelect),a=Fe(Me,s.__scopeSelect),[t,d]=r.useState(!1),c=z(n,a.onScrollButtonChange);return Y(()=>{if(o.viewport&&o.isPositioned){let l=function(){const u=i.scrollHeight-i.clientHeight,v=Math.ceil(i.scrollTop)<u;d(v)};const i=o.viewport;return l(),i.addEventListener("scroll",l),()=>i.removeEventListener("scroll",l)}},[o.viewport,o.isPositioned]),t?e.jsx(xt,{...s,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:i}=o;l&&i&&(l.scrollTop=l.scrollTop+i.offsetHeight)}}):null});gt.displayName=Me;var xt=r.forwardRef((s,n)=>{const{__scopeSelect:o,onAutoScroll:a,...t}=s,d=X("SelectScrollButton",o),c=r.useRef(null),l=ge(o),i=r.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return r.useEffect(()=>()=>i(),[i]),Y(()=>{var v;const u=l().find(f=>f.ref.current===document.activeElement);(v=u==null?void 0:u.ref.current)==null||v.scrollIntoView({block:"nearest"})},[l]),e.jsx(V.div,{"aria-hidden":!0,...t,ref:n,style:{flexShrink:0,...t.style},onPointerDown:_(t.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(a,50))}),onPointerMove:_(t.onPointerMove,()=>{var u;(u=d.onItemLeave)==null||u.call(d),c.current===null&&(c.current=window.setInterval(a,50))}),onPointerLeave:_(t.onPointerLeave,()=>{i()})})}),Bo="SelectSeparator",vt=r.forwardRef((s,n)=>{const{__scopeSelect:o,...a}=s;return e.jsx(V.div,{"aria-hidden":!0,...a,ref:n})});vt.displayName=Bo;var Le="SelectArrow",Vo=r.forwardRef((s,n)=>{const{__scopeSelect:o,...a}=s,t=xe(o),d=q(Le,o),c=X(Le,o);return d.open&&c.position==="popper"?e.jsx(zt,{...t,...a,ref:n}):null});Vo.displayName=Le;var Fo="SelectBubbleInput",wt=r.forwardRef(({__scopeSelect:s,value:n,...o},a)=>{const t=r.useRef(null),d=z(a,t),c=oo(n);return r.useEffect(()=>{const l=t.current;if(!l)return;const i=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(i,"value").set;if(c!==n&&v){const f=new Event("change",{bubbles:!0});v.call(l,n),l.dispatchEvent(f)}},[c,n]),e.jsx(V.select,{...o,style:{...Lt,...o.style},ref:d,defaultValue:n})});wt.displayName=Fo;function yt(s){return s===""||s===void 0}function bt(s){const n=Vt(s),o=r.useRef(""),a=r.useRef(0),t=r.useCallback(c=>{const l=o.current+c;n(l),function i(u){o.current=u,window.clearTimeout(a.current),u!==""&&(a.current=window.setTimeout(()=>i(""),1e3))}(l)},[n]),d=r.useCallback(()=>{o.current="",window.clearTimeout(a.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(a.current),[]),[o,t,d]}function St(s,n,o){const t=n.length>1&&Array.from(n).every(u=>u===n[0])?n[0]:n,d=o?s.indexOf(o):-1;let c=Ho(s,Math.max(d,0));t.length===1&&(c=c.filter(u=>u!==o));const i=c.find(u=>u.textValue.toLowerCase().startsWith(t.toLowerCase()));return i!==o?i:void 0}function Ho(s,n){return s.map((o,a)=>s[(n+a)%s.length])}var Wo=Ze,Ct=Xe,Uo=Qe,Ko=et,$o=tt,Nt=ot,zo=at,jt=ct,Tt=ut,Go=pt,Yo=ft,It=ht,Pt=gt,Et=vt;const Ke=Wo,$e=Uo,Oe=r.forwardRef(({className:s,children:n,...o},a)=>e.jsxs(Ct,{ref:a,className:Z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...o,children:[n,e.jsx(Ko,{asChild:!0,children:e.jsx(Ye,{className:"h-4 w-4 opacity-50"})})]}));Oe.displayName=Ct.displayName;const _t=r.forwardRef(({className:s,...n},o)=>e.jsx(It,{ref:o,className:Z("flex cursor-default items-center justify-center py-1",s),...n,children:e.jsx(Qt,{className:"h-4 w-4"})}));_t.displayName=It.displayName;const Rt=r.forwardRef(({className:s,...n},o)=>e.jsx(Pt,{ref:o,className:Z("flex cursor-default items-center justify-center py-1",s),...n,children:e.jsx(Ye,{className:"h-4 w-4"})}));Rt.displayName=Pt.displayName;const Be=r.forwardRef(({className:s,children:n,position:o="popper",...a},t)=>e.jsx($o,{children:e.jsxs(Nt,{ref:t,className:Z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:o,...a,children:[e.jsx(_t,{}),e.jsx(zo,{className:Z("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(Rt,{})]})}));Be.displayName=Nt.displayName;const Zo=r.forwardRef(({className:s,...n},o)=>e.jsx(jt,{ref:o,className:Z("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...n}));Zo.displayName=jt.displayName;const ne=r.forwardRef(({className:s,children:n,...o},a)=>e.jsxs(Tt,{ref:a,className:Z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",s),...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Yo,{children:e.jsx(ro,{className:"h-4 w-4"})})}),e.jsx(Go,{children:n})]}));ne.displayName=Tt.displayName;const qo=r.forwardRef(({className:s,...n},o)=>e.jsx(Et,{ref:o,className:Z("-mx-1 my-1 h-px bg-muted",s),...n}));qo.displayName=Et.displayName;const pr=()=>{const s=Gt(),{theme:n,setTheme:o,resolvedTheme:a}=Yt(),{t,i18n:d}=Zt(),{timeFormat:c,setTimeFormat:l}=eo(),{user:i,profile:u,signOut:v,updateProfile:f}=qt(),{isAvailable:w,authenticate:b,setCredentials:S,deleteCredentials:p}=fo(),[y,C]=r.useState(!1),[m,h]=r.useState(!1),[A,R]=r.useState(!1),[J,E]=r.useState(!1),[P,M]=r.useState({current:"",new:"",confirm:""});r.useEffect(()=>{const x=(u==null?void 0:u.biometric_enabled)||localStorage.getItem("biometricEnabled")==="true";C(x)},[u]);const G=x=>{const D=x?"dark":"light";o(D),localStorage.setItem("theme",D);const L=document.documentElement;D==="dark"?(L.classList.remove("light"),L.classList.add("dark")):(L.classList.remove("dark"),L.classList.add("light")),B({title:t("settings.themeChanged"),description:t(x?"settings.darkModeEnabled":"settings.lightModeEnabled")})},F=x=>{d.changeLanguage(x),localStorage.setItem("language",x),B({title:t("settings.languageChanged"),description:`${t("settings.languageChangedTo")} ${t(`languages.${x}`)}`})},H=x=>{l(x),B({title:t("settings.timeFormatChanged"),description:t(x==="12h"?"settings.timeFormat12h":"settings.timeFormat24h")})},$=async x=>{if(x){if(!w){B({title:t("common.error"),description:t("settings.biometricNotSupported"),variant:"destructive"});return}await b(t("settings.biometric"))?(await S((i==null?void 0:i.email)||"user","biometric_enabled"),localStorage.setItem("biometricEnabled","true"),C(!0),i&&await f({biometric_enabled:!0}),B({title:t("settings.biometric"),description:t("settings.biometricEnabled")})):B({title:t("common.error"),description:t("settings.biometricFailed"),variant:"destructive"})}else await p(),localStorage.setItem("biometricEnabled","false"),C(!1),i&&await f({biometric_enabled:!1}),B({title:t("settings.biometric"),description:t("settings.biometricDisabled")})},W=async()=>{if(P.new!==P.confirm){B({title:t("common.error"),description:t("settings.passwordMismatch"),variant:"destructive"});return}if(P.new.length<8){B({title:t("common.error"),description:t("settings.passwordMinLength"),variant:"destructive"});return}try{const{error:x}=await Jt.auth.updateUser({password:P.new});if(x)throw x;h(!1),M({current:"",new:"",confirm:""}),B({title:t("settings.passwordChanged"),description:t("settings.passwordChangedDesc")})}catch(x){B({title:t("common.error"),description:x.message,variant:"destructive"})}},U=async()=>{try{await v(),localStorage.clear(),B({title:t("settings.accountDeleted"),description:t("settings.accountDeletedDesc")}),R(!1),s("/splash")}catch(x){console.error("Error deleting account:",x)}},k=async()=>{try{await v(),B({title:t("profile.logout"),description:t("settings.logoutSuccess")}),s("/splash")}catch(x){console.error("Logout error:",x)}};return e.jsxs("div",{className:"min-h-screen bg-background pb-8",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(te,{variant:"ghost",size:"icon",onClick:()=>s(-1),children:e.jsx(so,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-semibold text-foreground",children:t("settings.title")})]})}),e.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-6",children:[e.jsxs("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-muted-foreground uppercase tracking-wide border-b border-border",children:t("settings.appearance")}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(a||n)==="dark"?e.jsx(po,{className:"w-5 h-5 text-primary"}):e.jsx(no,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.darkMode")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.darkModeDesc")})]})]}),e.jsx(We,{checked:(a||n)==="dark",onCheckedChange:G})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ao,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.language")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.languageDesc")})]})]}),e.jsxs(Ke,{value:d.language,onValueChange:F,children:[e.jsx(Oe,{className:"w-32",children:e.jsx($e,{})}),e.jsxs(Be,{children:[e.jsx(ne,{value:"es",children:"ðŸ‡ªðŸ‡¸ EspaÃ±ol"}),e.jsx(ne,{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx(ne,{value:"fr",children:"ðŸ‡«ðŸ‡· FranÃ§ais"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xt,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.timeFormat")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.timeFormatDesc")})]})]}),e.jsxs(Ke,{value:c,onValueChange:H,children:[e.jsx(Oe,{className:"w-28",children:e.jsx($e,{})}),e.jsxs(Be,{children:[e.jsx(ne,{value:"12h",children:"12h (AM/PM)"}),e.jsx(ne,{value:"24h",children:"24h"})]})]})]})]}),e.jsxs("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-muted-foreground uppercase tracking-wide border-b border-border",children:t("settings.security")}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(co,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.biometric")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.biometricDesc")})]})]}),e.jsx(We,{checked:y,onCheckedChange:$})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-3 w-full p-4 hover:bg-secondary/50 transition-colors",children:[e.jsx(uo,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-foreground",children:t("settings.changePassword")})]})]}),e.jsxs("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",style:{animationDelay:"0.15s"},children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-muted-foreground uppercase tracking-wide border-b border-border",children:t("settings.dataPrivacy")}),e.jsxs("button",{onClick:()=>s("/privacy-policy"),className:"flex items-center gap-3 w-full p-4 hover:bg-secondary/50 transition-colors",children:[e.jsx(mo,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-foreground",children:t("settings.privacyPolicy")})]})]}),e.jsx("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",style:{animationDelay:"0.2s"},children:e.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-3 w-full p-4 hover:bg-secondary/50 transition-colors",children:[e.jsx(io,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-foreground",children:t("profile.logout")})]})}),e.jsxs("section",{className:"bg-destructive/5 rounded-xl border border-destructive/20 overflow-hidden animate-fade-in",style:{animationDelay:"0.25s"},children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-destructive uppercase tracking-wide border-b border-destructive/20",children:t("settings.dangerZone")}),e.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-3 w-full p-4 hover:bg-destructive/10 transition-colors",children:[e.jsx(lo,{className:"w-5 h-5 text-destructive"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-destructive",children:t("settings.deleteAccount")}),e.jsx("p",{className:"text-sm text-destructive/70",children:t("settings.deleteAccountDesc")})]})]})]})]}),e.jsx(Ne,{open:m,onOpenChange:h,children:e.jsxs(je,{children:[e.jsxs(Te,{children:[e.jsx(Ie,{children:t("settings.changePassword")}),e.jsx(Pe,{children:t("settings.changePasswordDesc")})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Re,{children:t("settings.currentPassword")}),e.jsx(_e,{type:"password",value:P.current,onChange:x=>M({...P,current:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Re,{children:t("settings.newPassword")}),e.jsx(_e,{type:"password",value:P.new,onChange:x=>M({...P,new:x.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Re,{children:t("settings.confirmPassword")}),e.jsx(_e,{type:"password",value:P.confirm,onChange:x=>M({...P,confirm:x.target.value})})]})]}),e.jsxs(Ee,{children:[e.jsx(te,{variant:"outline",onClick:()=>h(!1),children:t("common.cancel")}),e.jsx(te,{onClick:W,children:t("common.save")})]})]})}),e.jsx(Ne,{open:A,onOpenChange:R,children:e.jsxs(je,{children:[e.jsxs(Te,{children:[e.jsx(Ie,{className:"text-destructive",children:t("settings.deleteAccount")}),e.jsx(Pe,{children:t("settings.deleteAccountConfirm")})]}),e.jsxs(Ee,{children:[e.jsx(te,{variant:"outline",onClick:()=>R(!1),children:t("common.cancel")}),e.jsx(te,{variant:"destructive",onClick:U,children:t("settings.deleteAccount")})]})]})}),e.jsx(Ne,{open:J,onOpenChange:E,children:e.jsxs(je,{children:[e.jsxs(Te,{children:[e.jsx(Ie,{children:t("profile.logout")}),e.jsx(Pe,{children:t("settings.logoutConfirm")})]}),e.jsxs(Ee,{children:[e.jsx(te,{variant:"outline",onClick:()=>E(!1),children:t("common.cancel")}),e.jsx(te,{onClick:k,children:t("profile.logout")})]})]})})]})};export{pr as default};
