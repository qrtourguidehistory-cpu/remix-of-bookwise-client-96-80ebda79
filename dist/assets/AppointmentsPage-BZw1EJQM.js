import{v as Me,Y as K,Z as Q,b as X,j as e,D as Oe,k as Ie,l as Ue,m as ze,V as ee,C as $,B as p,$ as te,a0 as Fe,r as o,a1 as Le,d as se,a2 as We,e as He,a3 as Ye,g as Be,a4 as Ze,a5 as Ve,a6 as ae,a7 as qe,a8 as Ge,c as h,a9 as re,u as Je,N as Ke,W as Qe}from"./index-CuCDr45z.js";import{B as G}from"./BottomNavigation-DHKk6KJJ.js";import{u as Xe}from"./useAppointments-BfUvK7Ya.js";import{u as ne}from"./useTimeFormat-B5gvatok.js";import{M as et}from"./map-pin-BUEZROFf.js";import{C as T}from"./calendar-DK7agc_s.js";import{S as tt}from"./scissors-DIJOHW9_.js";import{U as J}from"./user-K0gEQosr.js";import{P as st}from"./phone-D8XS6rNu.js";import{M as at}from"./mail-vj7Q6rJ-.js";import{f as ie}from"./format-2GL3XrvW.js";import{S as rt}from"./skeleton-Bj54gEsZ.js";import{T as nt}from"./trash-2-C4fTCvxp.js";import{f as it}from"./fr-DS7Xz6OG.js";import"./search-Dtt39If7.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=Me("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function le(a,t){const r=mt(a);let i;if(r.date){const l=ut(r.date,2);i=xt(l.restDateString,l.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);const c=i.getTime();let d=0,m;if(r.time&&(d=ft(r.time),isNaN(d)))return new Date(NaN);if(r.timezone){if(m=gt(r.timezone),isNaN(m))return new Date(NaN)}else{const l=new Date(c+d),u=new Date(0);return u.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),u.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),u}return new Date(c+d+m)}const S={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ot=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ct=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,dt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function mt(a){const t={},s=a.split(S.dateTimeDelimiter);let r;if(s.length>2)return t;if(/:/.test(s[0])?r=s[0]:(t.date=s[0],r=s[1],S.timeZoneDelimiter.test(t.date)&&(t.date=a.split(S.timeZoneDelimiter)[0],r=a.substr(t.date.length,a.length))),r){const i=S.timezone.exec(r);i?(t.time=r.replace(i[1],""),t.timezone=i[1]):t.time=r}return t}function ut(a,t){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=a.match(s);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,c=r[2]?parseInt(r[2]):null;return{year:c===null?i:c*100,restDateString:a.slice((r[1]||r[2]).length)}}function xt(a,t){if(t===null)return new Date(NaN);const s=a.match(ot);if(!s)return new Date(NaN);const r=!!s[4],i=w(s[1]),c=w(s[2])-1,d=w(s[3]),m=w(s[4]),l=w(s[5])-1;if(r)return vt(t,m,l)?pt(t,m,l):new Date(NaN);{const u=new Date(0);return!Nt(t,c,d)||!jt(t,i)?new Date(NaN):(u.setUTCFullYear(t,c,Math.max(i,d)),u)}}function w(a){return a?parseInt(a):1}function ft(a){const t=a.match(ct);if(!t)return NaN;const s=E(t[1]),r=E(t[2]),i=E(t[3]);return bt(s,r,i)?s*K+r*Q+i*1e3:NaN}function E(a){return a&&parseFloat(a.replace(",","."))||0}function gt(a){if(a==="Z")return 0;const t=a.match(dt);if(!t)return 0;const s=t[1]==="+"?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return Dt(r,i)?s*(r*K+i*Q):NaN}function pt(a,t,s){const r=new Date(0);r.setUTCFullYear(a,0,4);const i=r.getUTCDay()||7,c=(t-1)*7+s+1-i;return r.setUTCDate(r.getUTCDate()+c),r}const ht=[31,null,31,30,31,30,31,31,30,31,30,31];function oe(a){return a%400===0||a%4===0&&a%100!==0}function Nt(a,t,s){return t>=0&&t<=11&&s>=1&&s<=(ht[t]||(oe(a)?29:28))}function jt(a,t){return t>=1&&t<=(oe(a)?366:365)}function vt(a,t,s){return t>=1&&t<=53&&s>=0&&s<=6}function bt(a,t,s){return a===24?t===0&&s===0:s>=0&&s<60&&t>=0&&t<60&&a>=0&&a<25}function Dt(a,t){return t>=0&&t<=59}function yt({open:a,onOpenChange:t,appointment:s,onCancel:r,onRebook:i}){var A,C,v;const{formatTime:c}=ne(),{t:d}=X();if(!s)return null;const m=s.date&&new Date(s.date)<new Date,l=s.status==="cancelled";s.price_currency?s.price_currency:s.services&&s.services.length>0&&s.services[0].currency||"RD$";const N=()=>{switch(s.status){case"confirmed":return e.jsx("span",{className:"px-3 py-1 bg-success/10 text-success text-xs font-medium rounded-full",children:d("appointments.confirmed")||"Confirmada"});case"cancelled":return e.jsx("span",{className:"px-3 py-1 bg-destructive/10 text-destructive text-xs font-medium rounded-full",children:d("appointments.cancelled")||"Cancelada"});case"completed":return e.jsx("span",{className:"px-3 py-1 bg-muted text-muted-foreground text-xs font-medium rounded-full",children:d("appointments.completed")||"Completada"});case"pending":default:return e.jsx("span",{className:"px-3 py-1 bg-warning/10 text-warning text-xs font-medium rounded-full",children:d("appointments.pending")||"Pendiente"})}};return e.jsx(Oe,{open:a,onOpenChange:t,children:e.jsxs(Ie,{className:"max-w-md",children:[e.jsx(Ue,{children:e.jsxs(ze,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Detalles de la Cita"}),N()]})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center shrink-0",children:e.jsx(et,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Establecimiento"}),e.jsx("p",{className:"font-medium text-foreground",children:((A=s.establishment)==null?void 0:A.name)||"N/A"}),((C=s.establishment)==null?void 0:C.address)&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s.establishment.address})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center shrink-0",children:e.jsx(T,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fecha y Hora"}),e.jsx("p",{className:"font-medium text-foreground",children:s.date?ie(le(s.date),"EEEE, d 'de' MMMM yyyy",{locale:ee}):"N/A"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3 text-gray-600",strokeWidth:2}),s.start_time?c(s.start_time):"N/A",s.end_time&&` - ${c(s.end_time)}`,s.duration_minutes&&` (${s.duration_minutes} min)`]})]})]}),s.services&&s.services.length>0&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center shrink-0",children:e.jsx(tt,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Servicios"}),e.jsx("div",{className:"space-y-1",children:s.services.map(x=>{const b=x.price_rd!==void 0&&x.price_rd!==null?Number(x.price_rd):x.price||0,D=x.price_usd!==void 0&&x.price_usd!==null?Number(x.price_usd):0,_=x.duration_minutes||0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-foreground",children:x.name||"Servicio"}),e.jsxs("div",{className:"text-sm text-muted-foreground text-right",children:[e.jsxs("p",{children:[_," min"]}),e.jsxs("p",{className:"font-medium text-foreground",children:["RD$ ",b.toLocaleString()," / USD $",D.toFixed(2)]})]})]},x.id)})})]})]}),((v=s.staff)==null?void 0:v.full_name)&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center shrink-0",children:e.jsx(J,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profesional"}),e.jsx("p",{className:"font-medium text-foreground",children:s.staff.full_name})]})]}),s.client_name&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center shrink-0",children:e.jsx(J,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"A nombre de"}),e.jsx("p",{className:"font-medium text-foreground",children:s.client_name}),s.client_phone&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(st,{className:"w-3 h-3 text-gray-600",strokeWidth:2}),s.client_phone]}),s.client_email&&e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[e.jsx(at,{className:"w-3 h-3 text-gray-600",strokeWidth:2}),s.client_email]})]})]}),s.price&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center shrink-0",children:e.jsx(lt,{className:"w-5 h-5 text-gray-700",strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Precio Total"}),e.jsxs("div",{className:"font-medium text-foreground",children:[e.jsxs("p",{children:["RD$ ",(s.price_rd||s.price||0).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["USD $",(s.price_usd||0).toFixed(2)]})]})]})]}),s.notes&&e.jsxs("div",{className:"bg-muted rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Notas"}),e.jsx("p",{className:"text-sm text-foreground",children:s.notes})]}),!m&&!l&&e.jsxs("div",{className:"bg-warning/10 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-warning font-medium",children:"Política de Cancelación"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Las cancelaciones deben realizarse con al menos 24 horas de anticipación. La política de reembolso varía según el establecimiento."})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[!m&&!l&&r&&e.jsx(p,{variant:"outline",className:"flex-1 text-destructive hover:text-destructive",onClick:()=>{r(s.id),t(!1)},children:"Cancelar Cita"}),(m||l)&&i&&e.jsx(p,{variant:"coral",className:"flex-1",onClick:()=>{i(s),t(!1)},children:"Reservar de nuevo"}),e.jsx(p,{variant:"secondary",onClick:()=>t(!1),className:!m&&!l?"":"flex-1",children:"Cerrar"})]})]})})}var wt=Symbol("radix.slottable");function At(a){const t=({children:s})=>e.jsx(e.Fragment,{children:s});return t.displayName=`${a}.Slottable`,t.__radixId=wt,t}var ce="AlertDialog",[Ct]=He(ce,[te]),f=te(),de=a=>{const{__scopeAlertDialog:t,...s}=a,r=f(t);return e.jsx(Fe,{...r,...s,modal:!0})};de.displayName=ce;var _t="AlertDialogTrigger",St=o.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=f(s);return e.jsx(Ge,{...i,...r,ref:t})});St.displayName=_t;var Tt="AlertDialogPortal",me=a=>{const{__scopeAlertDialog:t,...s}=a,r=f(t);return e.jsx(Le,{...r,...s})};me.displayName=Tt;var kt="AlertDialogOverlay",ue=o.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=f(s);return e.jsx(qe,{...i,...r,ref:t})});ue.displayName=kt;var j="AlertDialogContent",[Rt,Et]=Ct(j),$t=At("AlertDialogContent"),xe=o.forwardRef((a,t)=>{const{__scopeAlertDialog:s,children:r,...i}=a,c=f(s),d=o.useRef(null),m=se(t,d),l=o.useRef(null);return e.jsx(We,{contentName:j,titleName:fe,docsSlug:"alert-dialog",children:e.jsx(Rt,{scope:s,cancelRef:l,children:e.jsxs(Ye,{role:"alertdialog",...c,...i,ref:m,onOpenAutoFocus:Be(i.onOpenAutoFocus,u=>{var N;u.preventDefault(),(N=l.current)==null||N.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx($t,{children:r}),e.jsx(Mt,{contentRef:d})]})})})});xe.displayName=j;var fe="AlertDialogTitle",ge=o.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=f(s);return e.jsx(Ze,{...i,...r,ref:t})});ge.displayName=fe;var pe="AlertDialogDescription",he=o.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=f(s);return e.jsx(Ve,{...i,...r,ref:t})});he.displayName=pe;var Pt="AlertDialogAction",Ne=o.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,i=f(s);return e.jsx(ae,{...i,...r,ref:t})});Ne.displayName=Pt;var je="AlertDialogCancel",ve=o.forwardRef((a,t)=>{const{__scopeAlertDialog:s,...r}=a,{cancelRef:i}=Et(je,s),c=f(s),d=se(t,i);return e.jsx(ae,{...c,...r,ref:d})});ve.displayName=je;var Mt=({contentRef:a})=>{const t=`\`${j}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${j}\` by passing a \`${pe}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${j}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{var r;document.getElementById((r=a.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,a]),null},Ot=de,It=me,be=ue,De=xe,ye=Ne,we=ve,Ae=ge,Ce=he;const _e=Ot,Ut=It,Se=o.forwardRef(({className:a,...t},s)=>e.jsx(be,{className:h("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s}));Se.displayName=be.displayName;const P=o.forwardRef(({className:a,...t},s)=>e.jsxs(Ut,{children:[e.jsx(Se,{}),e.jsx(De,{ref:s,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]}));P.displayName=De.displayName;const M=({className:a,...t})=>e.jsx("div",{className:h("flex flex-col space-y-2 text-center sm:text-left",a),...t});M.displayName="AlertDialogHeader";const O=({className:a,...t})=>e.jsx("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t});O.displayName="AlertDialogFooter";const I=o.forwardRef(({className:a,...t},s)=>e.jsx(Ae,{ref:s,className:h("text-lg font-semibold",a),...t}));I.displayName=Ae.displayName;const U=o.forwardRef(({className:a,...t},s)=>e.jsx(Ce,{ref:s,className:h("text-sm text-muted-foreground",a),...t}));U.displayName=Ce.displayName;const z=o.forwardRef(({className:a,...t},s)=>e.jsx(ye,{ref:s,className:h(re(),a),...t}));z.displayName=ye.displayName;const F=o.forwardRef(({className:a,...t},s)=>e.jsx(we,{ref:s,className:h(re({variant:"outline"}),"mt-2 sm:mt-0",a),...t}));F.displayName=we.displayName;function zt({open:a,onOpenChange:t,onConfirm:s,appointmentName:r}){return e.jsx(_e,{open:a,onOpenChange:t,children:e.jsxs(P,{children:[e.jsxs(M,{children:[e.jsx(I,{children:"¿Cancelar esta cita?"}),e.jsxs(U,{children:["Estás a punto de cancelar tu cita",r&&` en ${r}`,". Esta acción no se puede deshacer.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"text-warning font-medium",children:"Recuerda: Las cancelaciones deben realizarse con al menos 24 horas de anticipación."})]})]}),e.jsxs(O,{children:[e.jsx(F,{children:"No, mantener cita"}),e.jsx(z,{onClick:s,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sí, cancelar cita"})]})]})})}function Ft({open:a,onOpenChange:t,onConfirm:s,appointmentName:r}){return e.jsx(_e,{open:a,onOpenChange:t,children:e.jsxs(P,{children:[e.jsxs(M,{children:[e.jsx(I,{children:"¿Eliminar esta cita del historial?"}),e.jsxs(U,{children:["Estás a punto de eliminar permanentemente esta cita",r&&` de ${r}`," de tu historial.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("span",{className:"text-destructive font-medium",children:"Esta acción no se puede deshacer. La cita será eliminada permanentemente."})]})]}),e.jsxs(O,{children:[e.jsx(F,{children:"Cancelar"}),e.jsx(z,{onClick:s,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sí, eliminar"})]})]})})}const ss=()=>{var B,Z,V,q;const a=Je(),{t,i18n:s}=X(),{formatTime:r}=ne(),{upcomingAppointments:i,pastAppointments:c,loading:d,historyLimitReached:m,cancelAppointment:l,deleteAppointment:u}=Xe(),[N,A]=o.useState(null),[C,v]=o.useState(!1),[x,b]=o.useState(!1),[D,_]=o.useState(null),[Te,k]=o.useState(!1),[R,L]=o.useState(null),ke=()=>{switch(s.language){case"en":return Qe;case"fr":return it;default:return ee}},Re=n=>{A(n),v(!0)},W=n=>{_(n),b(!0)},Ee=async()=>{D&&(await l(D),b(!1),_(null))},$e=n=>{L(n),k(!0)},Pe=async()=>{R&&(await u(R),k(!1),L(null))},H=n=>{var g;(g=n.establishment)!=null&&g.id&&a(`/business/${n.establishment.id}`)},Y=n=>{if(!n)return"N/A";try{return ie(le(n),"d MMM yyyy",{locale:ke()})}catch{return n}};return d?e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsx("div",{className:"px-4 py-4 max-w-lg mx-auto",children:e.jsx("h1",{className:"text-xl font-bold text-foreground",children:t("appointments.title")})})}),e.jsx("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-4",children:[1,2,3].map(n=>e.jsx(rt,{className:"h-40 rounded-2xl"},n))}),e.jsx(G,{})]}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsx("div",{className:"px-4 py-4 max-w-lg mx-auto",children:e.jsx("h1",{className:"text-xl font-bold text-foreground",children:t("appointments.title")})})}),e.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-8",children:[m&&e.jsx("div",{className:"animate-fade-in bg-orange-50 border-l-4 border-orange-500 p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-orange-800 mb-1",children:t("appointments.historyFullTitle","Historial de citas lleno")}),e.jsx("p",{className:"text-sm text-orange-700 leading-relaxed",children:t("appointments.historyFullMessage","Su almacén de historial de citas está lleno. Por favor, limpie el historial de citas completadas para liberar espacio. Las citas completadas más antiguas se eliminarán automáticamente si no hay espacio disponible.")})]})]})}),e.jsxs("section",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-4",children:t("appointments.upcoming")}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(n=>{var g,y;return e.jsxs("div",{className:"bg-card rounded-2xl border border-border p-5 shadow-card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:((g=n.establishment)==null?void 0:g.name)||"Establecimiento"}),((y=n.staff)==null?void 0:y.full_name)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["con ",n.staff.full_name]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${n.status==="pending"?"bg-warning/10 text-warning":n.status==="confirmed"?"bg-success/10 text-success":n.status==="completed"?"bg-muted text-muted-foreground":n.status==="cancelled"?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}`,children:n.status==="pending"?t("appointments.pending")||"Pendiente":n.status==="confirmed"?t("appointments.confirmed"):n.status==="completed"?t("appointments.completed"):n.status==="cancelled"?t("appointments.cancelled"):t("appointments.pending")||"Pendiente"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(T,{className:"w-4 h-4"}),Y(n.date)]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx($,{className:"w-4 h-4"}),n.start_time?r(n.start_time):"N/A"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-border",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-foreground",children:["RD$ ",(n.price_rd||n.price||0).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["USD $",(n.price_usd||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>W(n.id),children:t("common.cancel")}),e.jsx(p,{variant:"coral",size:"sm",onClick:()=>Re(n),children:t("appointments.viewDetails")})]})]})]},n.id)})}):e.jsxs("div",{className:"text-center py-12 bg-card rounded-2xl border border-border",children:[e.jsx(T,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:t("appointments.noUpcoming")}),e.jsx(Ke,{to:"/search",children:e.jsx(p,{variant:"coral",className:"mt-4",children:t("appointments.bookNew")})})]})]}),c.length>0&&e.jsxs("section",{className:"animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsx("h2",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-4",children:t("appointments.history")}),e.jsx("div",{className:"space-y-4",children:c.map(n=>{var g,y;return e.jsxs("div",{className:"bg-card rounded-2xl border border-border p-5 opacity-75",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:((g=n.establishment)==null?void 0:g.name)||"Establecimiento"}),((y=n.staff)==null?void 0:y.full_name)&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["con ",n.staff.full_name]})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${n.status==="pending"?"bg-warning/10 text-warning":n.status==="cancelled"?"bg-destructive/10 text-destructive":n.status==="completed"?"bg-muted text-muted-foreground":n.status==="confirmed"?"bg-success/10 text-success":"bg-muted text-muted-foreground"}`,children:n.status==="pending"?t("appointments.pending")||"Pendiente":n.status==="cancelled"?t("appointments.cancelled"):n.status==="completed"?t("appointments.completed"):n.status==="confirmed"?t("appointments.confirmed"):t("appointments.pending")||"Pendiente"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(T,{className:"w-4 h-4"}),Y(n.date)]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx($,{className:"w-4 h-4"}),n.start_time?r(n.start_time):"N/A"]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 mt-3 border-t border-border",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-foreground",children:["RD$ ",(n.price_rd||n.price||0).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["USD $",(n.price_usd||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",onClick:()=>$e(n.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(nt,{className:"w-4 h-4"})}),e.jsx(p,{variant:"coral-outline",size:"sm",onClick:()=>H(n),children:t("appointments.rebookAppointment")})]})]})]},n.id)})})]})]}),e.jsx(G,{}),e.jsx(yt,{open:C,onOpenChange:v,appointment:N,onCancel:W,onRebook:H}),e.jsx(zt,{open:x,onOpenChange:b,onConfirm:Ee,appointmentName:(Z=(B=i.find(n=>n.id===D))==null?void 0:B.establishment)==null?void 0:Z.name}),e.jsx(Ft,{open:Te,onOpenChange:k,onConfirm:Pe,appointmentName:(q=(V=c.find(n=>n.id===R))==null?void 0:V.establishment)==null?void 0:q.name})]})};export{ss as default};
