const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-AusAqGWg.js","./index-CuCDr45z.js","./index-NvelxlJv.css"])))=>i.map(i=>d[i]);
import{v as S,r as i,ak as p,_ as x,u as re,al as ae,b as ie,a as ne,j as e,B as m,C as oe,D as E,k as M,l as B,m as F,am as I,an as O,Q as o,x as ce}from"./index-CuCDr45z.js";import{S as z}from"./switch-B_-i2oiw.js";import{u as le}from"./useTimeFormat-B5gvatok.js";import{e as de,S as $,a as G,b as Z,c as q,d as f}from"./select-BCn1Fbs5.js";import{I as V}from"./input-kEQIx20P.js";import{L as R}from"./label-j6JiXIym.js";import{A as me}from"./arrow-left-CddgBwaO.js";import{G as ue}from"./index-C5AJ_TFd.js";import{L as he}from"./log-out-DgVGueOG.js";import{T as ge}from"./trash-2-C4fTCvxp.js";import"./index-BQrET4mC.js";import"./index-DAIEfwYa.js";import"./chevron-down-rCs9dfjH.js";import"./check-B_0Zz_ZQ.js";import"./chevron-up-X0SJ8-zc.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=S("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=S("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=S("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=S("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ve=()=>{const[u,b]=i.useState(!1),[_,v]=i.useState("none"),[t,h]=i.useState(!0);i.useEffect(()=>{j()},[]);const j=async()=>{if(!p.isNativePlatform())return h(!1),{isAvailable:!1,biometryType:"none"};try{const{NativeBiometric:r}=await x(async()=>{const{NativeBiometric:n}=await import("./index-AusAqGWg.js").then(l=>l.i);return{NativeBiometric:n}},__vite__mapDeps([0,1,2]),import.meta.url),a=await r.isAvailable();return b(a.isAvailable),v(String(a.biometryType)),h(!1),{isAvailable:a.isAvailable,biometryType:String(a.biometryType)}}catch(r){return console.error("Biometric check failed:",r),h(!1),{isAvailable:!1,biometryType:"none"}}},A=i.useCallback(async r=>{if(!p.isNativePlatform())return console.log("Biometric auth not available in browser"),!1;try{const{NativeBiometric:a}=await x(async()=>{const{NativeBiometric:n}=await import("./index-AusAqGWg.js").then(l=>l.i);return{NativeBiometric:n}},__vite__mapDeps([0,1,2]),import.meta.url);return await a.verifyIdentity({reason:r||"AutenticaciÃ³n para continuar",title:"Bookwise",subtitle:"AutenticaciÃ³n biomÃ©trica",description:"Coloca tu dedo en el sensor o mira tu dispositivo"}),!0}catch(a){return console.error("Biometric authentication failed:",a),!1}},[]),d=i.useCallback(async(r,a)=>{if(!p.isNativePlatform())return!1;try{const{NativeBiometric:n}=await x(async()=>{const{NativeBiometric:l}=await import("./index-AusAqGWg.js").then(T=>T.i);return{NativeBiometric:l}},__vite__mapDeps([0,1,2]),import.meta.url);return await n.setCredentials({username:r,password:a,server:"bookwise.app"}),!0}catch(n){return console.error("Failed to set credentials:",n),!1}},[]),g=i.useCallback(async()=>{if(!p.isNativePlatform())return null;try{const{NativeBiometric:r}=await x(async()=>{const{NativeBiometric:n}=await import("./index-AusAqGWg.js").then(l=>l.i);return{NativeBiometric:n}},__vite__mapDeps([0,1,2]),import.meta.url),a=await r.getCredentials({server:"bookwise.app"});return{username:a.username,password:a.password}}catch(r){return console.error("Failed to get credentials:",r),null}},[]),y=i.useCallback(async()=>{if(!p.isNativePlatform())return!1;try{const{NativeBiometric:r}=await x(async()=>{const{NativeBiometric:a}=await import("./index-AusAqGWg.js").then(n=>n.i);return{NativeBiometric:a}},__vite__mapDeps([0,1,2]),import.meta.url);return await r.deleteCredentials({server:"bookwise.app"}),!0}catch(r){return console.error("Failed to delete credentials:",r),!1}},[]);return{isAvailable:u,biometryType:_,isLoading:t,authenticate:A,setCredentials:d,getCredentials:g,deleteCredentials:y,checkBiometricAvailability:j}},Be=()=>{const u=re(),{theme:b,setTheme:_,resolvedTheme:v}=ae(),{t,i18n:h}=ie(),{timeFormat:j,setTimeFormat:A}=le(),{user:d,profile:g,signOut:y,updateProfile:r}=ne(),{isAvailable:a,authenticate:n,setCredentials:l,deleteCredentials:T}=ve(),[H,L]=i.useState(!1),[Q,w]=i.useState(!1),[U,N]=i.useState(!1),[J,P]=i.useState(!1),[c,k]=i.useState({current:"",new:"",confirm:""});i.useEffect(()=>{const s=(g==null?void 0:g.biometric_enabled)||localStorage.getItem("biometricEnabled")==="true";L(s)},[g]);const K=s=>{const C=s?"dark":"light";_(C),localStorage.setItem("theme",C);const D=document.documentElement;C==="dark"?(D.classList.remove("light"),D.classList.add("dark")):(D.classList.remove("dark"),D.classList.add("light")),o({title:t("settings.themeChanged"),description:t(s?"settings.darkModeEnabled":"settings.lightModeEnabled")})},W=s=>{h.changeLanguage(s),localStorage.setItem("language",s),o({title:t("settings.languageChanged"),description:`${t("settings.languageChangedTo")} ${t(`languages.${s}`)}`})},X=s=>{A(s),o({title:t("settings.timeFormatChanged"),description:t(s==="12h"?"settings.timeFormat12h":"settings.timeFormat24h")})},Y=async s=>{if(s){if(!a){o({title:t("common.error"),description:t("settings.biometricNotSupported"),variant:"destructive"});return}await n(t("settings.biometric"))?(await l((d==null?void 0:d.email)||"user","biometric_enabled"),localStorage.setItem("biometricEnabled","true"),L(!0),d&&await r({biometric_enabled:!0}),o({title:t("settings.biometric"),description:t("settings.biometricEnabled")})):o({title:t("common.error"),description:t("settings.biometricFailed"),variant:"destructive"})}else await T(),localStorage.setItem("biometricEnabled","false"),L(!1),d&&await r({biometric_enabled:!1}),o({title:t("settings.biometric"),description:t("settings.biometricDisabled")})},ee=async()=>{if(c.new!==c.confirm){o({title:t("common.error"),description:t("settings.passwordMismatch"),variant:"destructive"});return}if(c.new.length<8){o({title:t("common.error"),description:t("settings.passwordMinLength"),variant:"destructive"});return}try{const{error:s}=await ce.auth.updateUser({password:c.new});if(s)throw s;w(!1),k({current:"",new:"",confirm:""}),o({title:t("settings.passwordChanged"),description:t("settings.passwordChangedDesc")})}catch(s){o({title:t("common.error"),description:s.message,variant:"destructive"})}},te=async()=>{try{await y(),localStorage.clear(),o({title:t("settings.accountDeleted"),description:t("settings.accountDeletedDesc")}),N(!1),u("/splash")}catch(s){console.error("Error deleting account:",s)}},se=async()=>{try{await y(),o({title:t("profile.logout"),description:t("settings.logoutSuccess")}),u("/splash")}catch(s){console.error("Logout error:",s)}};return e.jsxs("div",{className:"min-h-screen bg-background pb-8",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>u(-1),children:e.jsx(me,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-semibold text-foreground",children:t("settings.title")})]})}),e.jsxs("main",{className:"max-w-lg mx-auto px-4 py-6 space-y-6",children:[e.jsxs("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-muted-foreground uppercase tracking-wide border-b border-border",children:t("settings.appearance")}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(v||b)==="dark"?e.jsx(fe,{className:"w-5 h-5 text-primary"}):e.jsx(de,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.darkMode")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.darkModeDesc")})]})]}),e.jsx(z,{checked:(v||b)==="dark",onCheckedChange:K})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.language")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.languageDesc")})]})]}),e.jsxs($,{value:h.language,onValueChange:W,children:[e.jsx(G,{className:"w-32",children:e.jsx(Z,{})}),e.jsxs(q,{children:[e.jsx(f,{value:"es",children:"ðŸ‡ªðŸ‡¸ EspaÃ±ol"}),e.jsx(f,{value:"en",children:"ðŸ‡ºðŸ‡¸ English"}),e.jsx(f,{value:"fr",children:"ðŸ‡«ðŸ‡· FranÃ§ais"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.timeFormat")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.timeFormatDesc")})]})]}),e.jsxs($,{value:j,onValueChange:X,children:[e.jsx(G,{className:"w-28",children:e.jsx(Z,{})}),e.jsxs(q,{children:[e.jsx(f,{value:"12h",children:"12h (AM/PM)"}),e.jsx(f,{value:"24h",children:"24h"})]})]})]})]}),e.jsxs("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",style:{animationDelay:"0.1s"},children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-muted-foreground uppercase tracking-wide border-b border-border",children:t("settings.security")}),e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t("settings.biometric")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t("settings.biometricDesc")})]})]}),e.jsx(z,{checked:H,onCheckedChange:Y})]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-3 w-full p-4 hover:bg-secondary/50 transition-colors",children:[e.jsx(xe,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-foreground",children:t("settings.changePassword")})]})]}),e.jsxs("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",style:{animationDelay:"0.15s"},children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-muted-foreground uppercase tracking-wide border-b border-border",children:t("settings.dataPrivacy")}),e.jsxs("button",{onClick:()=>u("/privacy-policy"),className:"flex items-center gap-3 w-full p-4 hover:bg-secondary/50 transition-colors",children:[e.jsx(be,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-foreground",children:t("settings.privacyPolicy")})]})]}),e.jsx("section",{className:"bg-card rounded-xl border border-border overflow-hidden animate-fade-in",style:{animationDelay:"0.2s"},children:e.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-3 w-full p-4 hover:bg-secondary/50 transition-colors",children:[e.jsx(he,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-medium text-foreground",children:t("profile.logout")})]})}),e.jsxs("section",{className:"bg-destructive/5 rounded-xl border border-destructive/20 overflow-hidden animate-fade-in",style:{animationDelay:"0.25s"},children:[e.jsx("h2",{className:"px-4 py-3 text-sm font-semibold text-destructive uppercase tracking-wide border-b border-destructive/20",children:t("settings.dangerZone")}),e.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-3 w-full p-4 hover:bg-destructive/10 transition-colors",children:[e.jsx(ge,{className:"w-5 h-5 text-destructive"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-destructive",children:t("settings.deleteAccount")}),e.jsx("p",{className:"text-sm text-destructive/70",children:t("settings.deleteAccountDesc")})]})]})]})]}),e.jsx(E,{open:Q,onOpenChange:w,children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsx(F,{children:t("settings.changePassword")}),e.jsx(I,{children:t("settings.changePasswordDesc")})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:t("settings.currentPassword")}),e.jsx(V,{type:"password",value:c.current,onChange:s=>k({...c,current:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:t("settings.newPassword")}),e.jsx(V,{type:"password",value:c.new,onChange:s=>k({...c,new:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:t("settings.confirmPassword")}),e.jsx(V,{type:"password",value:c.confirm,onChange:s=>k({...c,confirm:s.target.value})})]})]}),e.jsxs(O,{children:[e.jsx(m,{variant:"outline",onClick:()=>w(!1),children:t("common.cancel")}),e.jsx(m,{onClick:ee,children:t("common.save")})]})]})}),e.jsx(E,{open:U,onOpenChange:N,children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsx(F,{className:"text-destructive",children:t("settings.deleteAccount")}),e.jsx(I,{children:t("settings.deleteAccountConfirm")})]}),e.jsxs(O,{children:[e.jsx(m,{variant:"outline",onClick:()=>N(!1),children:t("common.cancel")}),e.jsx(m,{variant:"destructive",onClick:te,children:t("settings.deleteAccount")})]})]})}),e.jsx(E,{open:J,onOpenChange:P,children:e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsx(F,{children:t("profile.logout")}),e.jsx(I,{children:t("settings.logoutConfirm")})]}),e.jsxs(O,{children:[e.jsx(m,{variant:"outline",onClick:()=>P(!1),children:t("common.cancel")}),e.jsx(m,{onClick:se,children:t("profile.logout")})]})]})})]})};export{Be as default};
