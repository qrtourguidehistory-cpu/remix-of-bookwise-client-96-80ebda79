import{r as l,j as e,X as S,c as p}from"./index-BrdmEQqy.js";import{C as I}from"./chevron-left-Azljn4A3.js";import{C as R}from"./chevron-right-B09dZFNJ.js";import{O as C}from"./OptimizedImage-DxgiOdh_.js";const E=({images:u,initialIndex:r=0,isOpen:a,onClose:d,alt:h="Image"})=>{const[n,c]=l.useState(r),w=l.useRef(null),f=l.useRef(null),x=l.useRef(null),i=50;l.useEffect(()=>{c(r)},[r,a]),l.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]);const m=o=>{w.current=o.touches[0].clientX},g=o=>{f.current=o.touches[0].clientX},j=()=>{if(!w.current||!f.current)return;const o=w.current-f.current,t=o>i,s=o<-i;t&&n<u.length-1&&c(n+1),s&&n>0&&c(n-1),w.current=null,f.current=null},b=()=>{n>0&&c(n-1)},v=()=>{n<u.length-1&&c(n+1)},y=o=>{a&&(o.key==="ArrowLeft"&&b(),o.key==="ArrowRight"&&v(),o.key==="Escape"&&d())};return l.useEffect(()=>(window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)),[a,n]),!a||u.length===0?null:e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center",onClick:d,onTouchStart:m,onTouchMove:g,onTouchEnd:j,children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 z-50 w-10 h-10 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition-colors",children:e.jsx(S,{className:"w-6 h-6"})}),u.length>1&&n>0&&e.jsx("button",{onClick:o=>{o.stopPropagation(),b()},className:"absolute left-4 z-50 w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition-colors",children:e.jsx(I,{className:"w-6 h-6"})}),e.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",onClick:o=>o.stopPropagation(),children:e.jsx("img",{ref:x,src:u[n],alt:`${h} ${n+1}`,className:"max-w-full max-h-full object-contain",style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"}})}),u.length>1&&n<u.length-1&&e.jsx("button",{onClick:o=>{o.stopPropagation(),v()},className:"absolute right-4 z-50 w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition-colors",children:e.jsx(R,{className:"w-6 h-6"})}),u.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-50",children:u.map((o,t)=>e.jsx("button",{onClick:s=>{s.stopPropagation(),c(t)},className:p("w-2 h-2 rounded-full transition-all duration-200",t===n?"bg-white w-6":"bg-white/50 hover:bg-white/70")},t))}),u.length>1&&e.jsxs("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-50 px-4 py-2 rounded-full bg-white/10 backdrop-blur-sm text-white text-sm",children:[n+1," / ",u.length]})]})},L=l.memo(function({images:r,alt:a="Image",className:d,clickable:h=!1}){const[n,c]=l.useState(0),[w,f]=l.useState(!1),x=l.useRef(null),i=l.useRef(null),m=l.useRef(!1),g=50,j=l.useRef("");l.useEffect(()=>{const t=r.join("|");j.current!==t?(j.current=t,c(0)):(r.length>0&&n>=r.length||r.length===0)&&c(0)},[r,n]);const b=t=>{if(m.current){m.current=!1;return}h&&r.length>0&&(t!==void 0&&c(t),f(!0))},v=t=>{x.current=t.touches[0].clientX,i.current=null,m.current=!1},y=t=>{i.current=t.touches[0].clientX},o=()=>{if(!x.current||!i.current){x.current=null,i.current=null;return}const t=x.current-i.current,s=Math.abs(t),N=t>g,k=t<-g;s>g&&(m.current=!0),N&&n<r.length-1&&c(n+1),k&&n>0&&c(n-1),x.current=null,i.current=null,setTimeout(()=>{m.current=!1},300)};return!r||r.length===0?e.jsx("div",{className:p("w-full h-full flex items-center justify-center bg-gradient-to-br from-secondary to-muted",d),children:e.jsx("div",{className:"w-16 h-16 rounded-xl bg-muted-foreground/10 flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-2xl",children:"ðŸ“·"})})}):r.length===1?e.jsxs(e.Fragment,{children:[e.jsx(C,{src:r[0],alt:a,loading:"lazy",onClick:h?b:void 0,className:p("w-full h-full object-cover",h&&"cursor-pointer",d)}),h&&e.jsx(E,{images:r,initialIndex:0,isOpen:w,onClose:()=>f(!1),alt:a})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:p("relative w-full h-full overflow-hidden",h&&"cursor-pointer",d),onTouchStart:v,onTouchMove:y,onTouchEnd:o,onClick:t=>{t.target.closest("button")||b()},children:[e.jsx("div",{className:"flex h-full transition-transform duration-300 ease-out",style:{transform:`translateX(-${n*100}%)`},children:r.map((t,s)=>e.jsx(C,{src:t,alt:`${a} ${s+1}`,loading:s===0?"eager":"lazy",className:"w-full h-full object-cover flex-shrink-0",onClick:()=>{b(s)},onError:N=>{console.warn(`Error loading image ${s}:`,t)}},`${t}-${s}`))}),r.length>1&&e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5 z-10",children:r.map((t,s)=>e.jsx("button",{onClick:N=>{N.stopPropagation(),c(s)},className:p("w-2 h-2 rounded-full transition-all duration-200",s===n?"bg-white w-4":"bg-white/50 hover:bg-white/70"),"aria-label":`Ir a imagen ${s+1}`},s))})]}),h&&e.jsx(E,{images:r,initialIndex:n,isOpen:w,onClose:()=>f(!1),alt:a})]})});export{L as I,E as a};
