import{u as N,b as y,a as w,j as e,B as r,I as _,J as l}from"./index-BrdmEQqy.js";import{B as c}from"./BottomNavigation-CpkXBKey.js";import{B as F}from"./BusinessCard-D-UCXKPV.js";import{a as k}from"./useEstablishments-D4xWevxa.js";import{u as B,H as m}from"./useFavorites-CnwfMFVv.js";import{A as d}from"./arrow-left-CdYFX0Tu.js";import"./calendar-CtBiRwRo.js";import"./user-4FsTwGBb.js";import"./ImageCarousel-BuQ-xDZJ.js";import"./chevron-left-Azljn4A3.js";import"./chevron-right-B09dZFNJ.js";import"./OptimizedImage-DxgiOdh_.js";import"./star-CT7qG9a3.js";const J=()=>{const i=N(),{t:s}=y(),{user:o,isGuest:x}=w(),{establishments:g,loading:u}=k(),{favoriteIds:h,loading:v,toggleFavorite:f,isFavorite:p}=B(),n=g.map(a=>({id:a.id,name:a.name,description:a.description||"",rating:Number(a.rating)||0,reviewCount:a.review_count||0,distance:"N/A",category:"other",imageUrl:a.main_image||"",images:a.main_image?[a.main_image]:[],coverImageUrl:a.cover_image_url||void 0,coverImages:a.cover_image_url?[a.cover_image_url]:[],logoUrl:a.logo_url||void 0,isFavorite:p(a.id),closingTime:"8:00 PM"})).filter(a=>h.has(a.id)),j=async a=>{if(!o){l({title:s("common.error"),description:"Debes iniciar sesión para gestionar favoritos",variant:"destructive"});return}const{error:t}=await f(a);t&&l({title:s("common.error"),description:"No se pudo actualizar favoritos",variant:"destructive"})},b=u||v;return x||!o?e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>i(-1),children:e.jsx(d,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-semibold text-foreground",children:s("favorites.title")})]})}),e.jsx("main",{className:"max-w-lg mx-auto px-4 py-6",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-coral-light flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-10 h-10 text-coral"})}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:s("favorites.loginRequired")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Inicia sesión para ver y guardar tus establecimientos favoritos"}),e.jsx(r,{variant:"coral",onClick:()=>i("/auth"),children:s("common.login")})]})}),e.jsx(c,{})]}):b?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(_,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>i(-1),children:e.jsx(d,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-semibold text-foreground",children:s("favorites.title")})]})}),e.jsx("main",{className:"max-w-lg mx-auto px-4 py-6",children:n.length>0?e.jsx("div",{className:"space-y-4",children:n.map((a,t)=>e.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${t*.05}s`},children:e.jsx(F,{business:a,onToggleFavorite:j})},a.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-coral-light flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-10 h-10 text-coral"})}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:s("favorites.noFavorites")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:s("favorites.noFavoritesDescription")}),e.jsx(r,{variant:"coral",onClick:()=>i("/search"),children:s("favorites.explorePlaces")})]})}),e.jsx(c,{})]})};export{J as default};
