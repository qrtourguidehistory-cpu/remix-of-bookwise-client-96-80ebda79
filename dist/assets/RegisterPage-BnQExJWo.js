import{u as T,a as L,b as A,r as i,j as e,B as I,n}from"./index-CuCDr45z.js";import{I as d}from"./input-kEQIx20P.js";import{L as o}from"./label-j6JiXIym.js";import{C as v}from"./checkbox-DNM5sXRN.js";import{m as u}from"./proxy-D8iC0sv6.js";import{A as U}from"./arrow-left-CddgBwaO.js";import{E as $,o as B,s as x}from"./types-Bt35DUH4.js";import{E as M}from"./eye-eYc968HM.js";import"./index-BQrET4mC.js";import"./check-B_0Zz_ZQ.js";const q=B({firstName:x().min(1,"First name is required"),lastName:x().min(1,"Last name is required"),email:x().email("Invalid email address"),password:x().min(8,"Password must be at least 8 characters")}),V=()=>{const N=T(),{signUp:b}=L(),{t}=A(),[r,w]=i.useState({firstName:"",lastName:"",email:"",password:""}),[h,k]=i.useState(!1),[g,C]=i.useState(!1),[P,F]=i.useState(!1),[f,j]=i.useState(!1),[a,y]=i.useState({}),m=(s,c)=>{w(l=>({...l,[s]:c})),a[s]&&y(l=>({...l,[s]:""}))},E=async()=>{const s=q.safeParse(r);if(!s.success){const l={};s.error.errors.forEach(p=>{p.path[0]&&(l[p.path[0]]=p.message)}),y(l);return}if(!g){n.error("Please accept the Terms of Use and Privacy Policy");return}j(!0);const{error:c}=await b(r.email,r.password,{first_name:r.firstName,last_name:r.lastName});c?(c.message.includes("already registered")?n.error("This email is already registered. Please sign in instead."):n.error(c.message||"Failed to create account"),j(!1)):(n.success("Account created! Please check your email to verify."),N("/"))},S=()=>{N("/auth/email")};return e.jsxs(u.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},transition:{duration:.3},className:"min-h-screen bg-white flex flex-col",children:[e.jsxs("div",{className:"flex items-center p-4 border-b border-slate-200",children:[e.jsx("button",{onClick:S,className:"p-2 -ml-2 rounded-full hover:bg-slate-100 transition-colors",children:e.jsx(U,{className:"h-6 w-6 text-slate-900"})}),e.jsx("h1",{className:"flex-1 text-center text-lg font-semibold text-slate-900 pr-10",children:t("auth.register.title","Create Account")})]}),e.jsxs("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:[e.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.4},className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"firstName",className:"text-slate-900",children:t("auth.register.firstName","First name")}),e.jsx(d,{id:"firstName",value:r.firstName,onChange:s=>m("firstName",s.target.value),placeholder:t("auth.register.firstName","First name"),className:`h-14 text-lg rounded-xl bg-slate-50 border-slate-200 text-slate-900 placeholder:text-slate-400 ${a.firstName?"border-red-500":""}`}),a.firstName&&e.jsx("p",{className:"text-sm text-red-500",children:a.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"lastName",className:"text-slate-900",children:t("auth.register.lastName","Last name")}),e.jsx(d,{id:"lastName",value:r.lastName,onChange:s=>m("lastName",s.target.value),placeholder:t("auth.register.lastName","Last name"),className:`h-14 text-lg rounded-xl bg-slate-50 border-slate-200 text-slate-900 placeholder:text-slate-400 ${a.lastName?"border-red-500":""}`}),a.lastName&&e.jsx("p",{className:"text-sm text-red-500",children:a.lastName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",className:"text-slate-900",children:t("booking.email","Email")}),e.jsx(d,{id:"email",type:"email",value:r.email,onChange:s=>m("email",s.target.value),placeholder:"email@example.com",className:`h-14 text-lg rounded-xl bg-slate-50 border-slate-200 text-slate-900 placeholder:text-slate-400 ${a.email?"border-red-500":""}`}),a.email&&e.jsx("p",{className:"text-sm text-red-500",children:a.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",className:"text-slate-900",children:t("auth.register.password","Password")}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{id:"password",type:h?"text":"password",value:r.password,onChange:s=>m("password",s.target.value),placeholder:"••••••••",className:`h-14 text-lg rounded-xl pr-12 bg-slate-50 border-slate-200 text-slate-900 placeholder:text-slate-400 ${a.password?"border-red-500":""}`}),e.jsx("button",{type:"button",onClick:()=>k(!h),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-900",children:h?e.jsx($,{className:"h-5 w-5"}):e.jsx(M,{className:"h-5 w-5"})})]}),a.password&&e.jsx("p",{className:"text-sm text-red-500",children:a.password})]})]}),e.jsxs(u.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.4},className:"mt-8 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(v,{id:"terms",checked:g,onCheckedChange:s=>C(s),className:"mt-1"}),e.jsxs(o,{htmlFor:"terms",className:"text-sm text-slate-600 leading-relaxed cursor-pointer",children:[t("auth.register.agreeTerms","I agree to the")," "," ",e.jsx("a",{href:"/privacy-policy",className:"text-slate-900 font-medium hover:underline",children:t("settings.privacyPolicy","Privacy Policy")})," ","&"," ",e.jsx("a",{href:"/terms-of-service",className:"text-slate-900 font-medium hover:underline",children:t("auth.register.termsOfUse","Terms of Use")})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(v,{id:"marketing",checked:P,onCheckedChange:s=>F(s),className:"mt-1"}),e.jsx(o,{htmlFor:"marketing",className:"text-sm text-slate-600 leading-relaxed cursor-pointer",children:t("auth.register.noMarketing","I do not wish to receive marketing notifications")})]})]})]}),e.jsx("div",{className:"px-6 pb-8 pt-4 border-t border-slate-200",children:e.jsx(I,{onClick:E,disabled:f,className:"w-full h-14 text-lg font-semibold rounded-xl",children:f?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):t("auth.register.continue","Continue")})})]})};export{V as default};
