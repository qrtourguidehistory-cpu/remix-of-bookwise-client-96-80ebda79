import{u as N,b as y,a as w,j as e,B as r,O as F,Q as c}from"./index-BMNWyqXE.js";import{B as l}from"./BottomNavigation-0UIWDczB.js";import{B as k}from"./BusinessCard-DzJfCbjP.js";import{u as B}from"./useEstablishments-q7AtOL-G.js";import{u as C,H as m}from"./useFavorites-f0mg6UCL.js";import{A as d}from"./arrow-left-BiC-gsyl.js";import"./search-jgXoqWUu.js";import"./calendar-hlERiZMZ.js";import"./user-CnmrVoxd.js";import"./ImageCarousel-B6U7dxr4.js";import"./star-BedAj-dF.js";const G=()=>{const i=N(),{t:a}=y(),{user:o,isGuest:x}=w(),{establishments:h,loading:g}=B(),{favoriteIds:u,loading:v,toggleFavorite:f,isFavorite:p}=C(),n=h.map(s=>({id:s.id,name:s.name,description:s.description||"",rating:Number(s.rating)||0,reviewCount:s.review_count||0,distance:"N/A",category:"other",imageUrl:s.main_image||"",images:s.main_image?[s.main_image]:[],isFavorite:p(s.id),closingTime:"8:00 PM"})).filter(s=>u.has(s.id)),j=async s=>{if(!o){c({title:a("common.error"),description:"Debes iniciar sesión para gestionar favoritos",variant:"destructive"});return}const{error:t}=await f(s);t&&c({title:a("common.error"),description:"No se pudo actualizar favoritos",variant:"destructive"})},b=g||v;return x||!o?e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>i(-1),children:e.jsx(d,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-semibold text-foreground",children:a("favorites.title")})]})}),e.jsx("main",{className:"max-w-lg mx-auto px-4 py-6",children:e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-coral-light flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-10 h-10 text-coral"})}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:a("favorites.loginRequired")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Inicia sesión para ver y guardar tus establecimientos favoritos"}),e.jsx(r,{variant:"coral",onClick:()=>i("/auth"),children:a("common.login")})]})}),e.jsx(l,{})]}):b?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(F,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"min-h-screen bg-background pb-20",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-card border-b border-border",children:e.jsxs("div",{className:"flex items-center gap-4 h-14 px-4 max-w-lg mx-auto",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>i(-1),children:e.jsx(d,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-semibold text-foreground",children:a("favorites.title")})]})}),e.jsx("main",{className:"max-w-lg mx-auto px-4 py-6",children:n.length>0?e.jsx("div",{className:"space-y-4",children:n.map((s,t)=>e.jsx("div",{className:"animate-fade-in",style:{animationDelay:`${t*.05}s`},children:e.jsx(k,{business:s,onToggleFavorite:j})},s.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-coral-light flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-10 h-10 text-coral"})}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:a("favorites.noFavorites")}),e.jsx("p",{className:"text-muted-foreground mb-6",children:a("favorites.noFavoritesDescription")}),e.jsx(r,{variant:"coral",onClick:()=>i("/search"),children:a("favorites.explorePlaces")})]})}),e.jsx(l,{})]})};export{G as default};
